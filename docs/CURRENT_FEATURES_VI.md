# ·ª®ng D·ª•ng Qu·∫£n L√Ω Trung T√¢m D·ªãch V·ª• - T√≠nh NƒÉng & Ch·ª©c NƒÉng

**Phi√™n B·∫£n T√†i Li·ªáu:** 1.0
**C·∫≠p Nh·∫≠t L·∫ßn Cu·ªëi:** 22/10/2025
**Tr·∫°ng Th√°i:** Tri·ªÉn Khai Hi·ªán T·∫°i

---

## M·ª•c L·ª•c

1. [T·ªïng Quan](#t·ªïng-quan)
2. [Vai Tr√≤ Ng∆∞·ªùi D√πng & Quy·ªÅn H·∫°n](#vai-tr√≤-ng∆∞·ªùi-d√πng--quy·ªÅn-h·∫°n)
3. [Quy Tr√¨nh L√†m Vi·ªác C·ªët L√µi](#quy-tr√¨nh-l√†m-vi·ªác-c·ªët-l√µi)
4. [C√°c Trang ·ª®ng D·ª•ng](#c√°c-trang-·ª©ng-d·ª•ng)
5. [API Endpoints](#api-endpoints)
6. [Logic Nghi·ªáp V·ª• & T·ª± ƒê·ªông H√≥a](#logic-nghi·ªáp-v·ª•--t·ª±-ƒë·ªông-h√≥a)
7. [Qu·∫£n L√Ω D·ªØ Li·ªáu](#qu·∫£n-l√Ω-d·ªØ-li·ªáu)
8. [Ph√¢n T√≠ch & B√°o C√°o](#ph√¢n-t√≠ch--b√°o-c√°o)
9. [X√°c Th·ª±c & Ph√¢n Quy·ªÅn](#x√°c-th·ª±c--ph√¢n-quy·ªÅn)
10. [X·ª≠ L√Ω File](#x·ª≠-l√Ω-file)
11. [T√≠nh NƒÉng Database](#t√≠nh-nƒÉng-database)
12. [Th√†nh Ph·∫ßn & M·∫´u UI](#th√†nh-ph·∫ßn--m·∫´u-ui)
13. [Tri·ªÉn Khai K·ªπ Thu·∫≠t](#tri·ªÉn-khai-k·ªπ-thu·∫≠t)
14. [H·∫°n Ch·∫ø Hi·ªán T·∫°i](#h·∫°n-ch·∫ø-hi·ªán-t·∫°i)

---

## T·ªïng Quan

·ª®ng D·ª•ng Qu·∫£n L√Ω Trung T√¢m D·ªãch V·ª• l√† m·ªôt ·ª©ng d·ª•ng web full-stack ƒë∆∞·ª£c thi·∫øt k·∫ø ƒë·ªÉ qu·∫£n l√Ω quy tr√¨nh phi·∫øu d·ªãch v·ª•, quan h·ªá kh√°ch h√†ng, t·ªìn kho v√† ph√¢n t√≠ch kinh doanh cho c√°c trung t√¢m d·ªãch v·ª•/s·ª≠a ch·ªØa. ƒê∆∞·ª£c x√¢y d·ª±ng v·ªõi Next.js 15, React 19, TypeScript, Supabase v√† tRPC, ·ª©ng d·ª•ng cung c·∫•p t√≠nh an to√†n ki·ªÉu d·ªØ li·ªáu ƒë·∫ßu cu·ªëi v√† giao di·ªán ng∆∞·ªùi d√πng hi·ªán ƒë·∫°i, responsive.

**Kh·∫£ NƒÉng Ch√≠nh:**
- Qu·∫£n l√Ω v√≤ng ƒë·ªùi phi·∫øu d·ªãch v·ª• v·ªõi ƒë√°nh s·ªë t·ª± ƒë·ªông
- Qu·∫£n l√Ω quan h·ªá kh√°ch h√†ng (CRM)
- Theo d√µi danh m·ª•c s·∫£n ph·∫©m v√† t·ªìn kho linh ki·ªán
- Ki·ªÉm so√°t truy c·∫≠p d·ª±a tr√™n vai tr√≤ (Qu·∫£n Tr·ªã Vi√™n, Qu·∫£n L√Ω, K·ªπ Thu·∫≠t Vi√™n, L·ªÖ T√¢n)
- Ph√¢n t√≠ch v√† b·∫£ng ƒëi·ªÅu khi·ªÉn hi·ªáu su·∫•t th·ªùi gian th·ª±c
- T√≠nh to√°n chi ph√≠ v√† qu·∫£n l√Ω kho t·ª± ƒë·ªông
- Theo d√µi ki·ªÉm to√°n to√†n di·ªán qua ghi ch√∫ t·ª± ƒë·ªông

---

## Vai Tr√≤ Ng∆∞·ªùi D√πng & Quy·ªÅn H·∫°n

### Qu·∫£n Tr·ªã Vi√™n (Admin) - To√†n Quy·ªÅn Truy C·∫≠p H·ªá Th·ªëng
- T·∫•t c·∫£ kh·∫£ nƒÉng c·ªßa Qu·∫£n L√Ω, K·ªπ Thu·∫≠t Vi√™n v√† L·ªÖ T√¢n
- Qu·∫£n l√Ω ng∆∞·ªùi d√πng (t·∫°o, s·ª≠a, x√≥a t√†i kho·∫£n nh√¢n vi√™n)
- Thi·∫øt l·∫≠p v√† c·∫•u h√¨nh h·ªá th·ªëng
- X√≥a c√°c thao t√°c b·ªã h·∫°n ch·∫ø (phi·∫øu d·ªãch v·ª•, linh ki·ªán, th∆∞∆°ng hi·ªáu)
- Truy c·∫≠p ƒë·∫ßy ƒë·ªß t·∫•t c·∫£ b√°o c√°o v√† ph√¢n t√≠ch
- Truy c·∫≠p trang qu·∫£n l√Ω nh√≥m

### Qu·∫£n L√Ω (Manager)
- T·∫•t c·∫£ kh·∫£ nƒÉng c·ªßa K·ªπ Thu·∫≠t Vi√™n v√† L·ªÖ T√¢n
- Qu·∫£n l√Ω danh m·ª•c s·∫£n ph·∫©m (CRUD)
- Qu·∫£n l√Ω t·ªìn kho linh ki·ªán (CRUD)
- Truy c·∫≠p ph√¢n t√≠ch v√† b√°o c√°o b·∫£ng ƒëi·ªÅu khi·ªÉn
- Thao t√°c x√≥a phi·∫øu d·ªãch v·ª•
- Qu·∫£n l√Ω th∆∞∆°ng hi·ªáu

### K·ªπ Thu·∫≠t Vi√™n (Technician)
- Xem v√† l√†m vi·ªác tr√™n c√°c phi·∫øu d·ªãch v·ª• ƒë∆∞·ª£c giao
- C·∫≠p nh·∫≠t tr·∫°ng th√°i phi·∫øu v√† th√™m ghi ch√∫/b√¨nh lu·∫≠n
- Th√™m, s·ª≠a ƒë·ªïi v√† x√≥a linh ki·ªán tr√™n phi·∫øu
- Xem th√¥ng tin kh√°ch h√†ng v√† s·∫£n ph·∫©m
- Truy c·∫≠p qu·∫£n l√Ω th∆∞∆°ng hi·ªáu
- Truy c·∫≠p b·∫£ng ƒëi·ªÅu khi·ªÉn h·∫°n ch·∫ø

### L·ªÖ T√¢n (Reception)
- T·∫°o phi·∫øu d·ªãch v·ª• m·ªõi
- Xem t·∫•t c·∫£ phi·∫øu (ch·ªâ ƒë·ªçc cho phi·∫øu ch∆∞a ƒë∆∞·ª£c giao)
- Qu·∫£n l√Ω th√¥ng tin kh√°ch h√†ng (CRUD)
- Xem s·∫£n ph·∫©m v√† th∆∞∆°ng hi·ªáu (ch·ªâ ƒë·ªçc)
- Truy c·∫≠p b·∫£ng ƒëi·ªÅu khi·ªÉn c∆° b·∫£n

---

## Quy Tr√¨nh L√†m Vi·ªác C·ªët L√µi

### V√≤ng ƒê·ªùi Phi·∫øu D·ªãch V·ª•

#### Lu·ªìng Tr·∫°ng Th√°i (M·ªôt Chi·ªÅu, ƒê∆∞·ª£c Th·ª±c Thi B·ªüi Database)
```
Ch·ªù x·ª≠ l√Ω (pending) ‚Üí ƒêang x·ª≠ l√Ω (in_progress) ‚Üí Ho√†n th√†nh (completed)
        ‚Üì                      ‚Üì
    ƒê√£ h·ªßy (cancelled)    ƒê√£ h·ªßy (cancelled)
```

**Tr·∫°ng Th√°i Cu·ªëi:** Phi·∫øu `ho√†n th√†nh` v√† `ƒë√£ h·ªßy` kh√¥ng th·ªÉ s·ª≠a ƒë·ªïi (ƒë∆∞·ª£c th·ª±c thi b·ªüi Row Level Security)

#### T√≠nh NƒÉng T·ª± ƒê·ªông
- **ƒê√°nh S·ªë Phi·∫øu:** T·ª± ƒë·ªông t·∫°o theo ƒë·ªãnh d·∫°ng `SV-YYYY-NNN` (v√≠ d·ª•: SV-2025-001)
- **T√≠nh To√°n Chi Ph√≠:** `t·ªïng_chi_ph√≠ = ph√≠_d·ªãch_v·ª• + ph√≠_ch·∫©n_ƒëo√°n + t·ªïng_linh_ki·ªán - gi·∫£m_gi√°`
- **T·ªïng Linh Ki·ªán:** T·ª± ƒë·ªông c·∫≠p nh·∫≠t qua database triggers khi th√™m/x√≥a linh ki·ªán
- **Ghi Nh·∫≠n Tr·∫°ng Th√°i:** T·∫•t c·∫£ thay ƒë·ªïi tr·∫°ng th√°i ƒë∆∞·ª£c t·ª± ƒë·ªông ghi v√†o b√¨nh lu·∫≠n
- **D·∫•u Th·ªùi Gian:** `b·∫Øt_ƒë·∫ßu_l√∫c` v√† `ho√†n_th√†nh_l√∫c` ƒë∆∞·ª£c theo d√µi t·ª± ƒë·ªông
- **Theo D√µi Thay ƒê·ªïi:** T·∫•t c·∫£ thay ƒë·ªïi tr∆∞·ªùng d·ªØ li·ªáu t·∫°o ghi ch√∫ t·ª± ƒë·ªông

#### Thao T√°c Tr√™n Phi·∫øu
1. **T·∫°o Phi·∫øu:** Tr√¨nh h∆∞·ªõng d·∫´n nhi·ªÅu b∆∞·ªõc v·ªõi tra c·ª©u/t·∫°o kh√°ch h√†ng
2. **C·∫≠p Nh·∫≠t Chi Ti·∫øt:** Ph√≠ d·ªãch v·ª•, ph√≠ ch·∫©n ƒëo√°n, gi·∫£m gi√°, m·ª©c ƒë·ªô ∆∞u ti√™n, lo·∫°i b·∫£o h√†nh
3. **Giao K·ªπ Thu·∫≠t Vi√™n:** Thay ƒë·ªïi k·ªπ thu·∫≠t vi√™n ƒë∆∞·ª£c giao (t·ª± ƒë·ªông ghi nh·∫≠n)
4. **Th√™m Linh Ki·ªán:** Ch·ªçn t·ª´ kho, ch·ªâ ƒë·ªãnh s·ªë l∆∞·ª£ng (gi·∫£m t·ªìn kho)
5. **C·∫≠p Nh·∫≠t Linh Ki·ªán:** S·ª≠a s·ªë l∆∞·ª£ng ho·∫∑c gi√° (ƒëi·ªÅu ch·ªânh t·ªìn kho t∆∞∆°ng ·ª©ng)
6. **X√≥a Linh Ki·ªán:** X√≥a linh ki·ªán kh·ªèi phi·∫øu (tr·∫£ l·∫°i t·ªìn kho)
7. **Th√™m B√¨nh Lu·∫≠n:** Ghi ch√∫, b√¨nh lu·∫≠n n·ªôi b·ªô v·ªõi theo d√µi t√°c gi·∫£
8. **T·∫£i L√™n H√¨nh ·∫¢nh:** ƒê√≠nh k√®m ·∫£nh/t√†i li·ªáu v√†o phi·∫øu
9. **C·∫≠p Nh·∫≠t Tr·∫°ng Th√°i:** Di chuy·ªÉn qua c√°c giai ƒëo·∫°n quy tr√¨nh
10. **Ho√†n Th√†nh/H·ªßy:** Chuy·ªÉn ƒë·ªïi tr·∫°ng th√°i cu·ªëi

### Qu·∫£n L√Ω Kh√°ch H√†ng
- **T·ª± ƒê·ªông Ph√°t Hi·ªán:** Tra c·ª©u s·ªë ƒëi·ªán tho·∫°i trong khi t·∫°o phi·∫øu
- **T·∫°o Nhanh:** T·∫°o kh√°ch h√†ng ngay trong form n·∫øu kh√¥ng t√¨m th·∫•y
- **CRUD ƒê·∫ßy ƒê·ªß:** T·∫°o, xem, s·ª≠a, x√≥a kh√°ch h√†ng
- **Qu·∫£n L√Ω Li√™n H·ªá:** Theo d√µi t√™n, ƒëi·ªán tho·∫°i, email, ƒë·ªãa ch·ªâ
- **Theo D√µi L·ªãch S·ª≠:** Xem l·ªãch s·ª≠ phi·∫øu d·ªãch v·ª• c·ªßa kh√°ch h√†ng
- **Ph√¢n T√≠ch TƒÉng Tr∆∞·ªüng:** S·ªë kh√°ch h√†ng m·ªõi h√†ng th√°ng v·ªõi % thay ƒë·ªïi

### Qu·∫£n L√Ω T·ªìn Kho
- **Theo D√µi T·ªìn Kho:** C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng th·ªùi gian th·ª±c
- **Gi·∫£m T·ª± ƒê·ªông:** Khi linh ki·ªán ƒë∆∞·ª£c th√™m v√†o phi·∫øu
- **TƒÉng T·ª± ƒê·ªông:** Khi linh ki·ªán ƒë∆∞·ª£c x√≥a ho·∫∑c tr·∫£ l·∫°i
- **Ki·ªÉm Tra T·ªìn Kho:** NgƒÉn ch·∫∑n t·ªìn kho √¢m
- **Thao T√°c Nguy√™n T·ª≠:** C√°c h√†m RPC database ƒë·∫£m b·∫£o t√≠nh nh·∫•t qu√°n d·ªØ li·ªáu
- **Quan H·ªá S·∫£n Ph·∫©m:** Linh ki·ªán ƒë∆∞·ª£c li√™n k·∫øt v·ªõi s·∫£n ph·∫©m ƒë·ªÉ d·ªÖ ch·ªçn

---

## C√°c Trang ·ª®ng D·ª•ng

### Trang C√¥ng Khai
| ƒê∆∞·ªùng D·∫´n | M√¥ T·∫£ | Truy C·∫≠p |
|-----------|-------|----------|
| `/login` | Trang ƒëƒÉng nh·∫≠p v·ªõi Supabase Auth | C√¥ng khai |
| `/setup` | Thi·∫øt l·∫≠p h·ªá th·ªëng ban ƒë·∫ßu (t·∫°o t√†i kho·∫£n admin) | B·∫£o v·ªá b·∫±ng m·∫≠t kh·∫©u |
| `/error` | Trang x·ª≠ l√Ω l·ªói | C√¥ng khai |

### Trang Y√™u C·∫ßu ƒêƒÉng Nh·∫≠p
| ƒê∆∞·ªùng D·∫´n | M√¥ T·∫£ | Vai Tr√≤ Y√™u C·∫ßu |
|-----------|-------|-----------------|
| `/dashboard` | B·∫£ng ƒëi·ªÅu khi·ªÉn ph√¢n t√≠ch ch√≠nh v·ªõi s·ªë li·ªáu v√† bi·ªÉu ƒë·ªì | T·∫•t c·∫£ vai tr√≤ |
| `/tickets` | Danh s√°ch phi·∫øu d·ªãch v·ª• v·ªõi b·ªô l·ªçc v√† t√¨m ki·∫øm | T·∫•t c·∫£ vai tr√≤ |
| `/tickets/add` | T·∫°o phi·∫øu m·ªõi (tr√¨nh h∆∞·ªõng d·∫´n nhi·ªÅu b∆∞·ªõc) | L·ªÖ T√¢n+ |
| `/tickets/[id]` | Xem chi ti·∫øt phi·∫øu v·ªõi th√¥ng tin ƒë·∫ßy ƒë·ªß | T·∫•t c·∫£ vai tr√≤ |
| `/tickets/[id]/edit` | S·ª≠a chi ti·∫øt phi·∫øu | Qu·∫£n L√Ω+ |
| `/customers` | Qu·∫£n l√Ω kh√°ch h√†ng v·ªõi thao t√°c CRUD | T·∫•t c·∫£ vai tr√≤ |
| `/products` | Qu·∫£n l√Ω danh m·ª•c s·∫£n ph·∫©m | Qu·∫£n L√Ω+ |
| `/parts` | Qu·∫£n l√Ω t·ªìn kho linh ki·ªán | Qu·∫£n L√Ω+ |
| `/brands` | Qu·∫£n l√Ω th∆∞∆°ng hi·ªáu | Qu·∫£n L√Ω+ |
| `/team` | Qu·∫£n l√Ω nh√¢n vi√™n/th√†nh vi√™n nh√≥m | Ch·ªâ Admin |
| `/account` | C√†i ƒë·∫∑t h·ªì s∆° ng∆∞·ªùi d√πng | T·∫•t c·∫£ vai tr√≤ |
| `/setting` | C√†i ƒë·∫∑t h·ªá th·ªëng | Admin+ |
| `/app-setting` | C·∫•u h√¨nh ·ª©ng d·ª•ng | Admin+ |
| `/report` | Trang b√°o c√°o (placeholder) | Qu·∫£n L√Ω+ |

---

## API Endpoints

### Admin Router (`admin.*`)
- `setup` - Thi·∫øt l·∫≠p h·ªá th·ªëng ban ƒë·∫ßu v·ªõi b·∫£o v·ªá m·∫≠t kh·∫©u v√† x·ª≠ l√Ω ng∆∞·ªùi d√πng th√¥ng minh

### Profile Router (`profile.*`)
- `getCurrentUser` - L·∫•y h·ªì s∆° ng∆∞·ªùi d√πng ƒë√£ x√°c th·ª±c v·ªõi vai tr√≤
- `updateProfile` - C·∫≠p nh·∫≠t h·ªì s∆° ng∆∞·ªùi d√πng (t√™n, email, avatar)
- `getAllUsers` - L·∫•y danh s√°ch t·∫•t c·∫£ ng∆∞·ªùi d√πng ƒëang ho·∫°t ƒë·ªông

### Tickets Router (`tickets.*`)
- `getTickets` - Li·ªát k√™ t·∫•t c·∫£ phi·∫øu v·ªõi th√¥ng tin kh√°ch h√†ng/s·∫£n ph·∫©m
- `getTicket` - L·∫•y chi ti·∫øt phi·∫øu ƒë∆°n v·ªõi th√¥ng tin ƒë·∫ßy ƒë·ªß v√† quan h·ªá
- `getPendingCount` - ƒê·∫øm s·ªë phi·∫øu ch∆∞a ho√†n th√†nh
- `getDailyRevenue` - D·ªØ li·ªáu doanh thu theo ng√†y cho bi·ªÉu ƒë·ªì
- `createTicket` - T·∫°o phi·∫øu m·ªõi v·ªõi tra c·ª©u/t·∫°o kh√°ch h√†ng v√† linh ki·ªán ban ƒë·∫ßu
- `updateTicket` - C·∫≠p nh·∫≠t c√°c tr∆∞·ªùng phi·∫øu (t·∫°o ghi ch√∫ t·ª± ƒë·ªông cho thay ƒë·ªïi)
- `updateTicketStatus` - Thay ƒë·ªïi tr·∫°ng th√°i phi·∫øu v·ªõi ki·ªÉm tra
- `addTicketPart` - Th√™m linh ki·ªán v√†o phi·∫øu (t·ª± ƒë·ªông gi·∫£m t·ªìn kho)
- `updateTicketPart` - C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng/gi√° linh ki·ªán (t·ª± ƒë·ªông ƒëi·ªÅu ch·ªânh t·ªìn kho)
- `deleteTicketPart` - X√≥a linh ki·ªán kh·ªèi phi·∫øu (tr·∫£ l·∫°i t·ªìn kho)
- `addComment` - Th√™m b√¨nh lu·∫≠n ho·∫∑c ghi ch√∫ v√†o phi·∫øu
- `addAttachment` - Th√™m metadata ƒë√≠nh k√®m file
- `getAttachments` - L·∫•y t·∫•t c·∫£ ƒë√≠nh k√®m c·ªßa phi·∫øu
- `deleteAttachment` - X√≥a ƒë√≠nh k√®m (Qu·∫£n L√Ω+)

### Customers Router (`customers.*`)
- `getCustomers` - Li·ªát k√™ t·∫•t c·∫£ kh√°ch h√†ng v·ªõi th√¥ng tin li√™n h·ªá
- `getNewCustomers` - S·ªë kh√°ch h√†ng h√†ng th√°ng v·ªõi t·ª∑ l·ªá tƒÉng tr∆∞·ªüng
- `createCustomer` - Th√™m kh√°ch h√†ng m·ªõi v·ªõi ki·ªÉm tra
- `updateCustomer` - S·ª≠a chi ti·∫øt kh√°ch h√†ng
- `deleteCustomer` - X√≥a kh√°ch h√†ng (b·∫£o v·ªá cascade)

### Products Router (`products.*`)
- `getProducts` - Li·ªát k√™ t·∫•t c·∫£ s·∫£n ph·∫©m v·ªõi th√¥ng tin th∆∞∆°ng hi·ªáu
- `getProduct` - L·∫•y s·∫£n ph·∫©m ƒë∆°n v·ªõi linh ki·ªán li√™n quan
- `getNewProducts` - S·ªë s·∫£n ph·∫©m h√†ng th√°ng v·ªõi t·ª∑ l·ªá tƒÉng tr∆∞·ªüng
- `createProduct` - T·∫°o s·∫£n ph·∫©m v·ªõi th∆∞∆°ng hi·ªáu v√† quan h·ªá linh ki·ªán
- `updateProduct` - C·∫≠p nh·∫≠t chi ti·∫øt s·∫£n ph·∫©m v√† li√™n k·∫øt linh ki·ªán

### Parts Router (`parts.*`)
- `getParts` - Li·ªát k√™ t·∫•t c·∫£ linh ki·ªán v·ªõi m·ª©c t·ªìn kho
- `getNewParts` - S·ªë linh ki·ªán h√†ng th√°ng v·ªõi t·ª∑ l·ªá tƒÉng tr∆∞·ªüng
- `createPart` - Th√™m linh ki·ªán m·ªõi v·ªõi t·ªìn kho ban ƒë·∫ßu v√† li√™n k·∫øt s·∫£n ph·∫©m
- `updatePart` - C·∫≠p nh·∫≠t chi ti·∫øt, gi√° c·∫£ v√† quan h·ªá s·∫£n ph·∫©m c·ªßa linh ki·ªán
- `deletePart` - X√≥a linh ki·ªán (d·ªçn d·∫πp quan h·ªá s·∫£n ph·∫©m)
- `getProducts` - L·∫•y s·∫£n ph·∫©m ƒë·ªÉ li√™n k·∫øt linh ki·ªán

### Brands Router (`brands.*`)
- `getBrands` - Li·ªát k√™ t·∫•t c·∫£ th∆∞∆°ng hi·ªáu v·ªõi tr·∫°ng th√°i ho·∫°t ƒë·ªông/kh√¥ng ho·∫°t ƒë·ªông
- `createBrand` - T·∫°o th∆∞∆°ng hi·ªáu m·ªõi
- `updateBrand` - C·∫≠p nh·∫≠t th∆∞∆°ng hi·ªáu (t√™n, m√¥ t·∫£, tr·∫°ng th√°i ho·∫°t ƒë·ªông)
- `deleteBrand` - X√≥a th∆∞∆°ng hi·ªáu (ki·ªÉm tra kh√¥ng c√≥ s·∫£n ph·∫©m ƒëang s·ª≠ d·ª•ng)

### Revenue Router (`revenue.*`)
- `getMonthlyRevenue` - Doanh thu th√°ng hi·ªán t·∫°i v√† th√°ng tr∆∞·ªõc v·ªõi t·ª∑ l·ªá tƒÉng tr∆∞·ªüng

---

## Logic Nghi·ªáp V·ª• & T·ª± ƒê·ªông H√≥a

### T√≠nh To√°n T·ª± ƒê·ªông
1. **T·ªïng Chi Ph√≠ Phi·∫øu** (C·ªôt ƒê∆∞·ª£c T·∫°o):
   ```
   t·ªïng_chi_ph√≠ = ph√≠_d·ªãch_v·ª• + ph√≠_ch·∫©n_ƒëo√°n + t·ªïng_linh_ki·ªán - gi·∫£m_gi√°
   ```
2. **T·ªïng Linh Ki·ªán M·ªói Phi·∫øu** (D·ª±a Tr√™n Trigger):
   - T√≠nh to√°n l·∫°i khi th√™m/x√≥a/c·∫≠p nh·∫≠t linh ki·ªán
   - T·ªïng c·ªßa (s·ªë_l∆∞·ª£ng √ó ƒë∆°n_gi√°) cho t·∫•t c·∫£ linh ki·ªán
3. **T·ªïng T·ª´ng D√≤ng**:
   - M·ªói d√≤ng linh ki·ªán: `s·ªë_l∆∞·ª£ng √ó ƒë∆°n_gi√°`

### H·ªá Th·ªëng Ghi Ch√∫ T·ª± ƒê·ªông

H·ªá th·ªëng t·ª± ƒë·ªông t·∫°o ghi ch√∫ cho:

| S·ª± Ki·ªán | ƒê·ªãnh D·∫°ng Ghi Ch√∫ | Lo·∫°i |
|---------|-------------------|------|
| T·∫°o Phi·∫øu | "Phi·∫øu ƒë∆∞·ª£c t·∫°o v·ªõi [S·∫£n ph·∫©m] cho kh√°ch h√†ng [T√™n]" | system |
| Thay ƒê·ªïi Tr·∫°ng Th√°i | "[Tr·∫°ng th√°i c≈©] ‚Üí [Tr·∫°ng th√°i m·ªõi]" | status_change |
| Thay ƒê·ªïi Ph√≠ D·ªãch V·ª• | "Ph√≠ d·ªãch v·ª• c·∫≠p nh·∫≠t: [C≈©] ‚Üí [M·ªõi]" | note |
| Thay ƒê·ªïi Ph√≠ Ch·∫©n ƒêo√°n | "Ph√≠ ch·∫©n ƒëo√°n c·∫≠p nh·∫≠t: [C≈©] ‚Üí [M·ªõi]" | note |
| √Åp D·ª•ng Gi·∫£m Gi√° | "Gi·∫£m gi√° c·∫≠p nh·∫≠t: [C≈©] ‚Üí [M·ªõi] üí∞" | note |
| Thay ƒê·ªïi M·ª©c ∆Øu Ti√™n | "M·ª©c ∆∞u ti√™n thay ƒë·ªïi: [C≈©] ‚Üí [M·ªõi]" | note |
| Thay ƒê·ªïi B·∫£o H√†nh | "Lo·∫°i b·∫£o h√†nh thay ƒë·ªïi: [C≈©] ‚Üí [M·ªõi]" | note |
| Giao K·ªπ Thu·∫≠t Vi√™n | "K·ªπ thu·∫≠t vi√™n thay ƒë·ªïi: [C≈©] ‚Üí [M·ªõi]" | assignment |
| C·∫≠p Nh·∫≠t V·∫•n ƒê·ªÅ | "M√¥ t·∫£ v·∫•n ƒë·ªÅ c·∫≠p nh·∫≠t" | note |
| C·∫≠p Nh·∫≠t Ghi Ch√∫ | "Ghi ch√∫ c·∫≠p nh·∫≠t" | note |
| Th√™m Linh Ki·ªán | "Th√™m linh ki·ªán: [T√™n] (SL: X @ [Gi√°])" | note |
| C·∫≠p Nh·∫≠t Linh Ki·ªán | "C·∫≠p nh·∫≠t linh ki·ªán: [T√™n] s·ªë l∆∞·ª£ng/gi√°" | note |
| X√≥a Linh Ki·ªán | "X√≥a linh ki·ªán: [T√™n]" | note |

### Ki·ªÉm Tra & Quy T·∫Øc Nghi·ªáp V·ª•

**Ki·ªÉm Tra Chuy·ªÉn Tr·∫°ng Th√°i:**
- Ch·ªâ cho ph√©p chuy·ªÉn ƒë·ªïi h·ª£p l·ªá (ƒë∆∞·ª£c th·ª±c thi trong API v√† database)
- Tr·∫°ng th√°i cu·ªëi (ho√†n th√†nh, ƒë√£ h·ªßy) kh√¥ng th·ªÉ s·ª≠a ƒë·ªïi

**Ki·ªÉm Tra D·ªØ Li·ªáu:**
- S·ªë ƒëi·ªán tho·∫°i: 10+ k√Ω t·ª±, m·∫´u c·ª• th·ªÉ
- Email: Ki·ªÉm tra ƒë·ªãnh d·∫°ng tu√¢n th·ªß RFC
- UUID: T·∫•t c·∫£ tham chi·∫øu kh√≥a ngo·∫°i ƒë∆∞·ª£c ki·ªÉm tra
- S·ªë d∆∞∆°ng: Ph√≠, gi√°, s·ªë l∆∞·ª£ng ph·∫£i > 0
- S·ªë l∆∞·ª£ng t·ªìn kho: Kh√¥ng th·ªÉ √¢m

**Qu·∫£n L√Ω T·ªìn Kho:**
- Thao t√°c nguy√™n t·ª≠ qua c√°c h√†m RPC database
- Logic d·ª± ph√≤ng n·∫øu RPC kh√¥ng kh·∫£ d·ª•ng
- Ki·ªÉm tra ngƒÉn ch·∫∑n b√°n qu√° m·ª©c

**T√≠nh To√†n V·∫πn Tham Chi·∫øu:**
- X√≥a cascade cho quan h·ªá
- NgƒÉn ch·∫∑n m·ªì c√¥i cho c√°c th·ª±c th·ªÉ quan tr·ªçng
- Th·ª±c thi r√†ng bu·ªôc kh√≥a ngo·∫°i

---

## Qu·∫£n L√Ω D·ªØ Li·ªáu

### Thao T√°c CRUD Kh·∫£ D·ª•ng

#### Kh√°ch H√†ng (CRUD ƒê·∫ßy ƒê·ªß)
- **T·∫°o:** T√™n, ƒëi·ªán tho·∫°i (b·∫Øt bu·ªôc), email, ƒë·ªãa ch·ªâ
- **ƒê·ªçc:** T·∫•t c·∫£ kh√°ch h√†ng v·ªõi h·ªó tr·ª£ ph√¢n trang
- **C·∫≠p Nh·∫≠t:** T·∫•t c·∫£ tr∆∞·ªùng c√≥ th·ªÉ s·ª≠a ƒë·ªïi
- **X√≥a:** V·ªõi ki·ªÉm tra b·∫£o v·ªá cascade

#### S·∫£n Ph·∫©m (CRUD ƒê·∫ßy ƒê·ªß)
- **T·∫°o:** T√™n, th∆∞∆°ng hi·ªáu, lo·∫°i, SKU, li√™n k·∫øt linh ki·ªán
- **ƒê·ªçc:** V·ªõi quan h·ªá th∆∞∆°ng hi·ªáu v√† linh ki·ªán
- **C·∫≠p Nh·∫≠t:** T·∫•t c·∫£ tr∆∞·ªùng v√† qu·∫£n l√Ω li√™n k·∫øt linh ki·ªán
- **X√≥a:** Ch·ªâ Admin/Qu·∫£n L√Ω

#### Linh Ki·ªán (CRUD ƒê·∫ßy ƒê·ªß)
- **T·∫°o:** T√™n, SKU, m√£ linh ki·ªán, gi√°, t·ªìn kho, li√™n k·∫øt s·∫£n ph·∫©m
- **ƒê·ªçc:** V·ªõi m·ª©c t·ªìn kho hi·ªán t·∫°i
- **C·∫≠p Nh·∫≠t:** T·∫•t c·∫£ tr∆∞·ªùng, gi√°, t·ªìn kho, quan h·ªá s·∫£n ph·∫©m
- **X√≥a:** V·ªõi d·ªçn d·∫πp b·∫£ng li√™n k·∫øt s·∫£n ph·∫©m

#### Th∆∞∆°ng Hi·ªáu (CRUD ƒê·∫ßy ƒê·ªß)
- **T·∫°o:** T√™n, m√¥ t·∫£, tr·∫°ng th√°i ho·∫°t ƒë·ªông
- **ƒê·ªçc:** V·ªõi l·ªçc ho·∫°t ƒë·ªông/kh√¥ng ho·∫°t ƒë·ªông
- **C·∫≠p Nh·∫≠t:** T√™n, m√¥ t·∫£, tr·∫°ng th√°i ho·∫°t ƒë·ªông
- **X√≥a:** V·ªõi ki·ªÉm tra s·ª≠ d·ª•ng (ngƒÉn x√≥a n·∫øu c√≥ s·∫£n ph·∫©m t·ªìn t·∫°i)

#### Phi·∫øu D·ªãch V·ª• (CRUD ƒê·∫ßy ƒê·ªß)
- **T·∫°o:** V·ªõi t·ª± ƒë·ªông t√¨m ho·∫∑c t·∫°o kh√°ch h√†ng
- **ƒê·ªçc:** T·∫•t c·∫£ quan h·ªá (kh√°ch h√†ng, s·∫£n ph·∫©m, linh ki·ªán, b√¨nh lu·∫≠n, ƒë√≠nh k√®m)
- **C·∫≠p Nh·∫≠t:** C·∫≠p nh·∫≠t tr∆∞·ªùng r·ªông r√£i v·ªõi ghi ch√∫ t·ª± ƒë·ªông
- **X√≥a:** Ch·ªâ Admin/Qu·∫£n L√Ω (c√≥ th·ªÉ x√≥a m·ªÅm)

#### Linh Ki·ªán Phi·∫øu (CRUD Tr√™n Phi·∫øu)
- **Th√™m:** Ch·ªçn t·ª´ kho v·ªõi s·ªë l∆∞·ª£ng v√† gi√°
- **C·∫≠p Nh·∫≠t:** S·ª≠a s·ªë l∆∞·ª£ng ho·∫∑c ƒë∆°n gi√°
- **X√≥a:** X√≥a kh·ªèi phi·∫øu v·ªõi tr·∫£ l·∫°i t·ªìn kho

#### B√¨nh Lu·∫≠n (T·∫°o/ƒê·ªçc)
- **T·∫°o:** Th√™m ghi ch√∫, b√¨nh lu·∫≠n n·ªôi b·ªô
- **ƒê·ªçc:** Xem v·ªõi th√¥ng tin h·ªì s∆° t√°c gi·∫£
- **L·ªçc:** Theo lo·∫°i (bot/nh√¢n vi√™n/t·∫•t c·∫£ b√¨nh lu·∫≠n)

#### ƒê√≠nh K√®m (T·∫°o/ƒê·ªçc/X√≥a)
- **T·∫°o:** T·∫£i l√™n h√¨nh ·∫£nh v·ªõi chu·∫©n h√≥a t√™n file ti·∫øng Vi·ªát
- **ƒê·ªçc:** Li·ªát k√™ t·∫•t c·∫£ ƒë√≠nh k√®m cho phi·∫øu
- **X√≥a:** Ch·ªâ Qu·∫£n L√Ω+

---

## Ph√¢n T√≠ch & B√°o C√°o

### S·ªë Li·ªáu B·∫£ng ƒêi·ªÅu Khi·ªÉn

**Ch·ªâ S·ªë Hi·ªáu Su·∫•t Ch√≠nh (KPI):**

1. **Doanh Thu H√†ng Th√°ng**
   - T·ªïng th√°ng hi·ªán t·∫°i (t·ª´ phi·∫øu ho√†n th√†nh)
   - So s√°nh th√°ng tr∆∞·ªõc
   - Ph·∫ßn trƒÉm thay ƒë·ªïi (‚Üë ho·∫∑c ‚Üì)

2. **Kh√°ch H√†ng M·ªõi**
   - S·ªë kh√°ch h√†ng h√†ng th√°ng
   - T·ª∑ l·ªá tƒÉng tr∆∞·ªüng so v·ªõi th√°ng tr∆∞·ªõc

3. **S·∫£n Ph·∫©m M·ªõi**
   - Th√™m h√†ng th√°ng
   - Theo d√µi t·ª∑ l·ªá tƒÉng tr∆∞·ªüng

4. **Linh Ki·ªán M·ªõi**
   - Th√™m t·ªìn kho h√†ng th√°ng
   - Theo d√µi t·ª∑ l·ªá tƒÉng tr∆∞·ªüng

5. **Phi·∫øu Ch·ªù X·ª≠ L√Ω**
   - ƒê·∫øm th·ªùi gian th·ª±c c·ªßa phi·∫øu ch∆∞a ho√†n th√†nh
   - Bao g·ªìm tr·∫°ng th√°i ch·ªù x·ª≠ l√Ω, ƒëang x·ª≠ l√Ω

### Bi·ªÉu ƒê·ªì & Tr·ª±c Quan H√≥a

**Bi·ªÉu ƒê·ªì Doanh Thu H√†ng Ng√†y:**
- Bi·ªÉu ƒë·ªì v√πng t∆∞∆°ng t√°c v·ªõi tooltip
- B·ªô l·ªçc kho·∫£ng th·ªùi gian: 7, 30, 90 ng√†y
- Tr·ª±c quan h√≥a xu h∆∞·ªõng
- Hi·ªÉn th·ªã t·ªïng doanh thu

**B·∫£ng Hi·ªáu Su·∫•t Nh√¢n Vi√™n:**
| S·ªë Li·ªáu | M√¥ T·∫£ |
|---------|-------|
| T·ªïng Phi·∫øu | T·∫•t c·∫£ phi·∫øu ƒë∆∞·ª£c giao cho k·ªπ thu·∫≠t vi√™n |
| ƒêang X·ª≠ L√Ω | Phi·∫øu ƒëang ho·∫°t ƒë·ªông hi·ªán t·∫°i |
| Ho√†n Th√†nh | Phi·∫øu ho√†n th√†nh th√†nh c√¥ng |
| Ch·ªù X·ª≠ L√Ω | Phi·∫øu ch∆∞a b·∫Øt ƒë·∫ßu |
| T·ª∑ L·ªá Ho√†n Th√†nh | Ph·∫ßn trƒÉm phi·∫øu ho√†n th√†nh |

### Ph√¢n T√≠ch Doanh Thu
- Ch·ªâ doanh thu phi·∫øu ho√†n th√†nh (lo·∫°i tr·ª´ ch·ªù x·ª≠ l√Ω/ƒë√£ h·ªßy)
- Nh√≥m theo ng√†y ƒë·ªÉ ph√¢n t√≠ch xu h∆∞·ªõng
- So s√°nh th√°ng tr∆∞·ªõc th√°ng sau
- T√≠nh to√°n t·ª∑ l·ªá tƒÉng tr∆∞·ªüng v·ªõi ch·ªâ s·ªë xu h∆∞·ªõng

---

## X√°c Th·ª±c & Ph√¢n Quy·ªÅn

### Quy Tr√¨nh Thi·∫øt L·∫≠p

**Quy Tr√¨nh Thi·∫øt L·∫≠p Th√¥ng Minh:**

1. **Truy C·∫≠p Trang Thi·∫øt L·∫≠p:** ƒêi·ªÅu h∆∞·ªõng ƒë·∫øn `/setup`
2. **X√°c Minh M·∫≠t Kh·∫©u:** Nh·∫≠p `SETUP_PASSWORD` t·ª´ bi·∫øn m√¥i tr∆∞·ªùng
3. **X·ª≠ L√Ω Ng∆∞·ªùi D√πng T·ª± ƒê·ªông:**
   - **Thi·∫øt L·∫≠p L·∫ßn ƒê·∫ßu:** T·∫°o ng∆∞·ªùi d√πng x√°c th·ª±c admin + h·ªì s∆°
   - **ƒê·∫∑t L·∫°i M·∫≠t Kh·∫©u:** N·∫øu ng∆∞·ªùi d√πng t·ªìn t·∫°i, c·∫≠p nh·∫≠t m·∫≠t kh·∫©u
   - **S·ª≠a H·ªì S∆°:** N·∫øu x√°c th·ª±c t·ªìn t·∫°i kh√¥ng c√≥ h·ªì s∆°, t·∫°o h·ªì s∆°
   - **D·ªçn D·∫πp M·ªì C√¥i:** N·∫øu h·ªì s∆° t·ªìn t·∫°i kh√¥ng c√≥ x√°c th·ª±c, x√≥a m·ªì c√¥i v√† t·∫°o l·∫°i

**Bi·∫øn M√¥i Tr∆∞·ªùng Y√™u C·∫ßu:**
```bash
SETUP_PASSWORD=mat_khau_thiet_lap_cua_ban
ADMIN_EMAIL=admin@example.com
ADMIN_PASSWORD=mat_khau_bao_mat
ADMIN_NAME=Qu·∫£n Tr·ªã Vi√™n
```

### Ki·ªÉm So√°t Truy C·∫≠p D·ª±a Tr√™n Vai Tr√≤ (RBAC)

**B·∫£o M·∫≠t Ba L·ªõp:**

1. **C·∫•p Database (RLS Policies):**
   - Row Level Security tr√™n t·∫•t c·∫£ b·∫£ng
   - H√†m tr·ª£ gi√∫p: `is_admin()`, `is_admin_or_manager()`
   - Ch√≠nh s√°ch SELECT, INSERT, UPDATE, DELETE d·ª±a tr√™n vai tr√≤

2. **C·∫•p API (tRPC):**
   - Context ki·ªÉm tra ng∆∞·ªùi d√πng ƒë√£ x√°c th·ª±c
   - Service role client b·ªè qua RLS cho thao t√°c server
   - Ki·ªÉm tra Zod tr√™n t·∫•t c·∫£ ƒë·∫ßu v√†o

3. **C·∫•p UI (React):**
   - Render c√≥ ƒëi·ªÅu ki·ªán d·ª±a tr√™n vai tr√≤ ng∆∞·ªùi d√πng
   - Trang b·∫£o v·ªá v·ªõi middleware
   - Menu ƒëi·ªÅu h∆∞·ªõng d·ª±a tr√™n vai tr√≤

### Qu·∫£n L√Ω Phi√™n

**Ba Lo·∫°i Client:**

1. **Browser Client** (`src/utils/supabase/client.ts`)
   - Cho thao t√°c ph√≠a client
   - S·ª≠ d·ª•ng anon key v·ªõi cookies

2. **Server Client** (`src/utils/supabase/server.ts`)
   - Cho Server Components v·ªõi cookies
   - Nh·∫≠n bi·∫øt phi√™n

3. **Admin Client** (`src/utils/supabase/admin.ts`)
   - Service role key
   - B·ªè qua RLS cho thao t√°c server
   - S·ª≠ d·ª•ng trong context tRPC

**Lu·ªìng X√°c Th·ª±c:**
- Supabase Auth v·ªõi JWT tokens
- Phi√™n d·ª±a tr√™n cookie
- T·ª± ƒë·ªông l√†m m·ªõi token
- ƒêƒÉng xu·∫•t an to√†n v·ªõi x√≥a cookie

---

## X·ª≠ L√Ω File

### Storage Buckets

| Bucket | M·ª•c ƒê√≠ch | Quy·ªÅn ƒê·ªçc | Quy·ªÅn Ghi | Quy·ªÅn X√≥a |
|--------|----------|-----------|-----------|-----------|
| `avatars` | ·∫¢nh ƒë·∫°i di·ªán ng∆∞·ªùi d√πng | C√¥ng khai | Th∆∞ m·ª•c ri√™ng | Th∆∞ m·ª•c ri√™ng |
| `product_images` | ·∫¢nh s·∫£n ph·∫©m | C√¥ng khai | Th∆∞ m·ª•c ri√™ng | Th∆∞ m·ª•c ri√™ng |
| `service_media` | ƒê√≠nh k√®m phi·∫øu | C√¥ng khai | ƒê√£ x√°c th·ª±c | Qu·∫£n L√Ω+ |

### H·ªó Tr·ª£ K√Ω T·ª± Ti·∫øng Vi·ªát

**Chu·∫©n H√≥a T√™n File:**
- Lo·∫°i b·ªè d·∫•u kh·ªèi k√Ω t·ª± ti·∫øng Vi·ªát:
  - `√†, √°, ·∫£, √£, ·∫°, ƒÉ, ·∫Ø, ·∫±, ·∫≥, ·∫µ, ·∫∑, √¢, ·∫•, ·∫ß, ·∫©, ·∫´, ·∫≠` ‚Üí `a`
  - `ƒë` ‚Üí `d`
  - `√®, √©, ·∫ª, ·∫Ω, ·∫π, √™, ·∫ø, ·ªÅ, ·ªÉ, ·ªÖ, ·ªá` ‚Üí `e`
  - `√¨, √≠, ·ªâ, ƒ©, ·ªã` ‚Üí `i`
  - `√≤, √≥, ·ªè, √µ, ·ªç, √¥, ·ªë, ·ªì, ·ªï, ·ªó, ·ªô, ∆°, ·ªõ, ·ªù, ·ªü, ·ª°, ·ª£` ‚Üí `o`
  - `√π, √∫, ·ªß, ≈©, ·ª•, ∆∞, ·ª©, ·ª´, ·ª≠, ·ªØ, ·ª±` ‚Üí `u`
  - `·ª≥, √Ω, ·ª∑, ·ªπ, ·ªµ` ‚Üí `y`
- Thay th·∫ø k√Ω t·ª± ƒë·∫∑c bi·ªát b·∫±ng g·∫°ch d∆∞·ªõi
- Gi·ªØ nguy√™n ph·∫ßn m·ªü r·ªông file
- NgƒÉn ch·∫∑n v·∫•n ƒë·ªÅ t∆∞∆°ng th√≠ch h·ªá th·ªëng file

### T√≠nh NƒÉng T·∫£i L√™n

**T·∫£i L√™n H√¨nh ·∫¢nh V√†o Phi·∫øu:**
- H·ªó tr·ª£ ch·ªçn nhi·ªÅu file
- Ki·ªÉm tra lo·∫°i file (ch·ªâ h√¨nh ·∫£nh)
- Theo d√µi k√≠ch th∆∞·ªõc file
- M√¥ t·∫£/metadata t√πy ch·ªçn
- T·ª± ƒë·ªông t·∫°o ƒë∆∞·ªùng d·∫´n l∆∞u tr·ªØ
- Li√™n k·∫øt qua b·∫£ng `service_ticket_attachments`

**Qu·∫£n L√Ω ƒê√≠nh K√®m:**
- Xem danh s√°ch t·∫•t c·∫£ ƒë√≠nh k√®m phi·∫øu
- Xem tr∆∞·ªõc h√¨nh ·∫£nh (n·∫øu h·ªó tr·ª£)
- T·∫£i xu·ªëng file g·ªëc
- X√≥a ƒë√≠nh k√®m (ch·ªâ Qu·∫£n L√Ω+)

---

## T√≠nh NƒÉng Database

### Triggers

| Trigger | B·∫£ng | S·ª± Ki·ªán | H√†nh ƒê·ªông |
|---------|------|---------|-----------|
| `set_ticket_number` | `service_tickets` | INSERT | T·∫°o s·ªë phi·∫øu duy nh·∫•t (SV-YYYY-NNN) |
| `log_status_change` | `service_tickets` | UPDATE | T·∫°o ghi ch√∫ t·ª± ƒë·ªông khi tr·∫°ng th√°i thay ƒë·ªïi |
| `update_updated_at_column` | T·∫•t c·∫£ b·∫£ng | UPDATE | C·∫≠p nh·∫≠t d·∫•u th·ªùi gian `updated_at` |

### C·ªôt ƒê∆∞·ª£c T·∫°o

| B·∫£ng | C·ªôt | Bi·ªÉu Th·ª©c |
|------|-----|-----------|
| `service_tickets` | `total_cost` | `service_fee + diagnosis_fee + parts_total - discount_amount` |

### Indexes

**Service Tickets:**
- `ticket_number` (duy nh·∫•t)
- `customer_id`
- `product_id`
- `status`
- `priority`
- `created_at`

**Customers:**
- `phone` (indexed)
- `email` (indexed)

**Parts:**
- `sku` (indexed)
- `part_number` (indexed)

**Comments:**
- `ticket_id`
- `created_at`
- T·ªïng h·ª£p: `(ticket_id, created_at DESC)`

### H√†m Database

| H√†m | M·ª•c ƒê√≠ch | Tham S·ªë |
|-----|----------|---------|
| `generate_ticket_number()` | T·∫°o s·ªë phi·∫øu tu·∫ßn t·ª± m·ªói nƒÉm | Kh√¥ng (s·ª≠ d·ª•ng nƒÉm hi·ªán t·∫°i) |
| `decrease_part_stock()` | Gi·∫£m t·ªìn kho nguy√™n t·ª≠ v·ªõi ki·ªÉm tra | `part_id UUID, quantity INTEGER` |
| `increase_part_stock()` | TƒÉng t·ªìn kho nguy√™n t·ª≠ | `part_id UUID, quantity INTEGER` |
| `is_admin()` | Ki·ªÉm tra ng∆∞·ªùi d√πng hi·ªán t·∫°i l√† Admin | Kh√¥ng (s·ª≠ d·ª•ng `auth.uid()`) |
| `is_admin_or_manager()` | Ki·ªÉm tra ng∆∞·ªùi d√πng l√† Admin ho·∫∑c Qu·∫£n L√Ω | Kh√¥ng (s·ª≠ d·ª•ng `auth.uid()`) |
| `update_updated_at_column()` | H√†m trigger cho d·∫•u th·ªùi gian | Kh√¥ng |

### ENUMs & Ki·ªÉu T√πy Ch·ªânh

**user_role:**
- `admin` (qu·∫£n tr·ªã vi√™n)
- `manager` (qu·∫£n l√Ω)
- `technician` (k·ªπ thu·∫≠t vi√™n)
- `reception` (l·ªÖ t√¢n)

**ticket_status:**
- `pending` (ch·ªù x·ª≠ l√Ω)
- `in_progress` (ƒëang x·ª≠ l√Ω)
- `completed` (ho√†n th√†nh)
- `cancelled` (ƒë√£ h·ªßy)

**priority_level:**
- `low` (th·∫•p)
- `normal` (b√¨nh th∆∞·ªùng)
- `high` (cao)
- `urgent` (kh·∫©n c·∫•p)

**warranty_type:**
- `warranty` (trong b·∫£o h√†nh)
- `paid` (h·∫øt b·∫£o h√†nh, kh√°ch h√†ng tr·∫£)
- `goodwill` (s·ª≠a mi·ªÖn ph√≠ nh∆∞ c·ª≠ ch·ªâ)

**comment_type:**
- `note` (b√¨nh lu·∫≠n th·ªß c√¥ng)
- `status_change` (t·ª± ƒë·ªông)
- `assignment` (thay ƒë·ªïi k·ªπ thu·∫≠t vi√™n)
- `system` (do h·ªá th·ªëng t·∫°o)

### Database Views

**service_ticket_comments_with_author:**
- N·ªëi `service_ticket_comments` v·ªõi `profiles`
- Cung c·∫•p b√¨nh lu·∫≠n v·ªõi t√™n v√† email t√°c gi·∫£
- S·ª≠ d·ª•ng ƒë·ªÉ hi·ªÉn th·ªã l·ªãch s·ª≠ b√¨nh lu·∫≠n v·ªõi th√¥ng tin ng∆∞·ªùi d√πng

### R√†ng Bu·ªôc

**Kh√≥a Ngo·∫°i:**
- T·∫•t c·∫£ quan h·ªá v·ªõi x√≥a cascade khi ph√π h·ª£p
- NgƒÉn ch·∫∑n b·∫£n ghi m·ªì c√¥i

**R√†ng Bu·ªôc Ki·ªÉm Tra:**
- Gi√° tr·ªã d∆∞∆°ng (ph√≠, gi√°, s·ªë l∆∞·ª£ng > 0)
- Logic ng√†y (completed_at >= started_at)
- Gi√° tr·ªã enum h·ª£p l·ªá

**R√†ng Bu·ªôc Duy Nh·∫•t:**
- S·ªë phi·∫øu (m·ªói nƒÉm)
- Email ng∆∞·ªùi d√πng
- ƒêi·ªán tho·∫°i kh√°ch h√†ng (t√πy ch·ªçn)

---

## Th√†nh Ph·∫ßn & M·∫´u UI

### B·∫£ng D·ªØ Li·ªáu

**T√≠nh NƒÉng:**
- C·ªôt c√≥ th·ªÉ s·∫Øp x·∫øp
- N√∫t h√†nh ƒë·ªông n·ªôi tuy·∫øn (s·ª≠a, x√≥a)
- Hi·ªÉn th·ªã h√†nh ƒë·ªông d·ª±a tr√™n vai tr√≤
- D·ªØ li·ªáu th·ªùi gian th·ª±c qua tRPC + React Query
- Tr·∫°ng th√°i loading v√† skeletons
- Placeholder tr·∫°ng th√°i tr·ªëng

**B·∫£ng Ph·ªï Bi·∫øn:**
- Danh s√°ch phi·∫øu v·ªõi badges tr·∫°ng th√°i
- B·∫£ng kh√°ch h√†ng v·ªõi th√¥ng tin li√™n h·ªá
- Danh m·ª•c s·∫£n ph·∫©m v·ªõi quan h·ªá th∆∞∆°ng hi·ªáu
- T·ªìn kho linh ki·ªán v·ªõi m·ª©c t·ªìn kho
- Th√†nh vi√™n nh√≥m v·ªõi badges vai tr√≤
- B·∫£ng hi·ªáu su·∫•t nh√¢n vi√™n

### Forms

**M·∫´u:**

1. **Tr√¨nh H∆∞·ªõng D·∫´n Nhi·ªÅu B∆∞·ªõc** (T·∫°o Phi·∫øu):
   - B∆∞·ªõc 1: Ch·ªçn/t·∫°o kh√°ch h√†ng
   - B∆∞·ªõc 2: Ch·ªçn s·∫£n ph·∫©m
   - B∆∞·ªõc 3: Ch·ªçn linh ki·ªán
   - B∆∞·ªõc 4: Chi ti·∫øt d·ªãch v·ª• (ph√≠, b·∫£o h√†nh, ∆∞u ti√™n)
   - Ch·ªâ b√°o ti·∫øn tr√¨nh
   - ƒêi·ªÅu h∆∞·ªõng Quay l·∫°i/Ti·∫øp theo

2. **Ch·ªânh S·ª≠a N·ªôi Tuy·∫øn:**
   - Form ch·ªânh s·ª≠a d·ª±a tr√™n modal
   - ƒêi·ªÅn tr∆∞·ªõc gi√° tr·ªã hi·ªán t·∫°i
   - Ki·ªÉm tra th·ªùi gian th·ª±c
   - C·∫≠p nh·∫≠t l·∫°c quan

3. **Dropdown C√≥ Th·ªÉ T√¨m Ki·∫øm:**
   - B·ªô ch·ªçn s·∫£n ph·∫©m v·ªõi t√¨m ki·∫øm
   - B·ªô ch·ªçn linh ki·ªán v·ªõi t√¨m ki·∫øm
   - Tra c·ª©u ƒëi·ªán tho·∫°i kh√°ch h√†ng
   - B·ªô ch·ªçn giao k·ªπ thu·∫≠t vi√™n

4. **Ki·ªÉm Tra Th·ªùi Gian Th·ª±c:**
   - Schemas Zod cho t·∫•t c·∫£ forms
   - Th√¥ng b√°o l·ªói c·∫•p tr∆∞·ªùng
   - N√∫t g·ª≠i v√¥ hi·ªáu h√≥a cho ƒë·∫øn khi h·ª£p l·ªá

### Modals & Dialogs

**Modals H√†nh ƒê·ªông Nhanh:**
- **B√¨nh Lu·∫≠n Nhanh:** Th√™m ghi ch√∫ v√†o phi·∫øu kh√¥ng c·∫ßn t·∫£i l·∫°i trang
- **T·∫£i L√™n H√¨nh ·∫¢nh Nhanh:** T·∫£i l√™n nhi·ªÅu file v·ªõi xem tr∆∞·ªõc
- **S·ª≠a Kh√°ch H√†ng:** C·∫≠p nh·∫≠t chi ti·∫øt kh√°ch h√†ng
- **S·ª≠a S·∫£n Ph·∫©m/Linh Ki·ªán:** C·∫≠p nh·∫≠t m·ª•c t·ªìn kho
- **Dialogs X√°c Nh·∫≠n:** X√°c nh·∫≠n x√≥a v·ªõi c·∫£nh b√°o

**T√≠nh NƒÉng Dialog:**
- Backdrop l·ªõp ph·ªß
- Ph√≠m t·∫Øt (ESC ƒë·ªÉ ƒë√≥ng)
- Click b√™n ngo√†i ƒë·ªÉ lo·∫°i b·ªè
- Kh·∫£ nƒÉng truy c·∫≠p (nh√£n ARIA)

### Ph·∫£n H·ªìi Tr·ª±c Quan

**Ph·∫ßn T·ª≠ UI:**

1. **Th√¥ng B√°o Toast:**
   - Th√¥ng b√°o th√†nh c√¥ng (xanh l√°)
   - Th√¥ng b√°o l·ªói (ƒë·ªè)
   - T·ª± ƒë·ªông lo·∫°i b·ªè sau timeout
   - N√∫t h√†nh ƒë·ªông (ho√†n t√°c, th·ª≠ l·∫°i)

2. **Tr·∫°ng Th√°i Loading:**
   - M√†n h√¨nh skeleton cho b·∫£ng
   - L·ªõp ph·ªß spinner cho forms
   - Ch·ªâ b√°o loading n√∫t
   - Ranh gi·ªõi Suspense

3. **Badges Tr·∫°ng Th√°i:**
   - M√£ m√†u theo tr·∫°ng th√°i (ch·ªù=v√†ng, ƒëang x·ª≠ l√Ω=xanh d∆∞∆°ng, ho√†n th√†nh=xanh l√°, ƒë√£ h·ªßy=x√°m)
   - Ch·ªâ b√°o ∆∞u ti√™n (kh·∫©n c·∫•p=ƒë·ªè, cao=cam, b√¨nh th∆∞·ªùng=xanh d∆∞∆°ng, th·∫•p=x√°m)
   - Badges vai tr√≤ trong b·∫£ng nh√≥m

4. **Ch·ªâ B√°o TƒÉng Tr∆∞·ªüng:**
   - Icon xu h∆∞·ªõng l√™n (xanh l√°) cho tƒÉng tr∆∞·ªüng d∆∞∆°ng
   - Icon xu h∆∞·ªõng xu·ªëng (ƒë·ªè) cho tƒÉng tr∆∞·ªüng √¢m
   - Hi·ªÉn th·ªã ph·∫ßn trƒÉm thay ƒë·ªïi
   - S·ªë li·ªáu m√£ m√†u

5. **Tr·∫°ng Th√°i Tr·ªëng:**
   - Th√¥ng ƒëi·ªáp th√¢n thi·ªán ("Ch∆∞a c√≥ phi·∫øu")
   - L·ªùi nh·∫Øc h√†nh ƒë·ªông ("T·∫°o phi·∫øu ƒë·∫ßu ti√™n c·ªßa b·∫°n")
   - Minh h·ªça ho·∫∑c icons

---

## Tri·ªÉn Khai K·ªπ Thu·∫≠t

### Stack Ki·∫øn Tr√∫c

**Frontend:**
- Next.js 15.5.4 v·ªõi App Router
- React 19.1.0
- TypeScript (ch·∫ø ƒë·ªô strict)
- Turbopack (dev v√† build)
- Tailwind CSS 4 v·ªõi shadcn/ui

**Backend:**
- tRPC 11.6.0 cho l·ªõp API
- Supabase cho PostgreSQL + Auth
- Server Components (RSC)
- Server Actions cho mutations

**Qu·∫£n L√Ω Tr·∫°ng Th√°i:**
- TanStack Query (React Query) cho tr·∫°ng th√°i server
- React hooks cho tr·∫°ng th√°i UI
- Tr·∫°ng th√°i URL cho b·ªô l·ªçc/ph√¢n trang
- C·∫≠p nh·∫≠t l·∫°c quan qua tRPC

**C√¥ng C·ª• Developer:**
- Biome 2.2.0 (linting + formatting)
- TypeScript ch·∫ø ƒë·ªô strict
- ESLint v·ªõi config Next.js
- Git hooks (qua Husky, t√πy ch·ªçn)

### An To√†n Ki·ªÉu

**Ki·ªÉu ƒê·∫ßu Cu·ªëi:**
1. Schema Database ‚Üí Ki·ªÉu Supabase (t·ª± ƒë·ªông t·∫°o)
2. tRPC routers ‚Üí Ki·ªÉu Client (suy lu·∫≠n)
3. Zod schemas ‚Üí Ki·ªÉm tra runtime
4. TypeScript ‚Üí An to√†n compile-time

**M·∫´u:**
```typescript
// Server (tRPC procedure)
input: z.object({ ticketId: z.string().uuid() })

// Client (suy lu·∫≠n t·ª± ƒë·ªông)
const { data } = trpc.tickets.getTicket.useQuery({ ticketId })
// data ƒë∆∞·ª£c type ƒë·∫ßy ƒë·ªß d·ª±a tr√™n ki·ªÉu tr·∫£ v·ªÅ server
```

### Server-Side Rendering

**Chi·∫øn L∆∞·ª£c Rendering:**
- **Server Components:** M·∫∑c ƒë·ªãnh cho t·∫•t c·∫£ trang (kh√¥ng g·ª≠i JavaScript ƒë·∫øn client)
- **Client Components:** Ch·ªâ khi c·∫ßn (ch·ªâ th·ªã `'use client'`)
  - Forms v·ªõi t√≠nh t∆∞∆°ng t√°c
  - Modals v√† dialogs
  - Charts v√† tr·ª±c quan h√≥a
  - ƒêƒÉng k√Ω d·ªØ li·ªáu th·ªùi gian th·ª±c

**T·ªëi ∆Øu Hi·ªáu Su·∫•t:**
- Streaming v·ªõi `<Suspense>`
- Import ƒë·ªông cho components n·∫∑ng
- Code splitting ·ªü c·∫•p route
- Lazy loading c·ªßa modals

### M·∫´u Qu·∫£n L√Ω Tr·∫°ng Th√°i

**Tr·∫°ng Th√°i Server (TanStack Query + tRPC):**
- Caching t·ª± ƒë·ªông v·ªõi stale-while-revalidate
- Refetch n·ªÅn
- C·∫≠p nh·∫≠t l·∫°c quan
- X·ª≠ l√Ω l·ªói v√† th·ª≠ l·∫°i
- Th·ªùi gian stale 5 ph√∫t cho d·ªØ li·ªáu ph√¢n t√≠ch

**Tr·∫°ng Th√°i UI (React Hooks):**
- `useState` cho tr·∫°ng th√°i local component
- `useReducer` cho m√°y tr·∫°ng th√°i ph·ª©c t·∫°p
- Context API cho theme v√† t√πy ch·ªçn ng∆∞·ªùi d√πng

**Tr·∫°ng Th√°i URL:**
- Search params cho b·ªô l·ªçc
- Route params cho ID th·ª±c th·ªÉ
- ƒêi·ªÅu h∆∞·ªõng v·ªõi shallow routing

### Bi·ªán Ph√°p B·∫£o M·∫≠t

**B·∫£o M·∫≠t Database:**
- Row Level Security (RLS) tr√™n t·∫•t c·∫£ b·∫£ng
- H√†m tr·ª£ gi√∫p cho ki·ªÉm tra vai tr√≤
- NgƒÉn ch·∫∑n SQL injection (truy v·∫•n tham s·ªë h√≥a)
- NgƒÉn ch·∫∑n chi·∫øm ƒëo·∫°t schema (`SET search_path = public, extensions`)

**B·∫£o M·∫≠t API:**
- Context tRPC ki·ªÉm tra ng∆∞·ªùi d√πng ƒë√£ x√°c th·ª±c
- Service role client cho thao t√°c server
- Ki·ªÉm tra ƒë·∫ßu v√†o v·ªõi Zod
- B·∫£o v·ªá CSRF qua Supabase Auth

**B·∫£o M·∫≠t X√°c Th·ª±c:**
- JWT tokens v·ªõi h·∫øt h·∫°n ng·∫Øn
- L∆∞u tr·ªØ cookie an to√†n (HttpOnly, SameSite)
- T·ª± ƒë·ªông l√†m m·ªõi token
- Qu·∫£n l√Ω phi√™n

### T·ªëi ∆Øu Hi·ªáu Su·∫•t

**Database:**
- Indexes tr√™n c√°c c·ªôt th∆∞·ªùng truy v·∫•n
- Indexes t·ªïng h·ª£p cho joins ph·ªï bi·∫øn
- Materialized views (n·∫øu c·∫ßn trong t∆∞∆°ng lai)
- Connection pooling qua Supabase

**·ª®ng D·ª•ng:**
- Server-side rendering (FCP nhanh h∆°n)
- Code splitting m·ªói route
- T·ªëi ∆∞u h√¨nh ·∫£nh v·ªõi Next.js `<Image>`
- Lazy loading c·ªßa components kh√¥ng quan tr·ªçng

**Caching:**
- Cache React Query (5 ph√∫t cho metrics)
- Cache tr√¨nh duy·ªát cho t√†i s·∫£n tƒ©nh
- Caching k·∫øt qu·∫£ truy v·∫•n database (Supabase)

---

## H·∫°n Ch·∫ø Hi·ªán T·∫°i

### Ch∆∞a Tri·ªÉn Khai

**Module B√°o C√°o:**
- Trang `/report` t·ªìn t·∫°i nh∆∞ng kh√¥ng c√≥ ch·ª©c nƒÉng
- Th√¥ng ƒëi·ªáp placeholder: "B√°o C√°o S·∫Øp Ra M·∫Øt"
- T∆∞∆°ng lai: Xu·∫•t PDF, tr√¨nh t·∫°o b√°o c√°o t√πy ch·ªânh

**Trang C√†i ƒê·∫∑t:**
- `/setting` v√† `/app-setting` c√≥ c·∫•u tr√∫c c∆° b·∫£n
- Ch·ª©c nƒÉng t·ªëi thi·ªÉu hi·ªán t·∫°i
- T∆∞∆°ng lai: C√†i ƒë·∫∑t c√¥ng ty, thu·∫ø su·∫•t, m·∫´u email

**Th√¥ng B√°o:**
- Kh√¥ng c√≥ h·ªá th·ªëng th√¥ng b√°o th·ªùi gian th·ª±c
- Kh√¥ng c√≥ th√¥ng b√°o push
- Kh√¥ng c√≥ th√¥ng b√°o email
- T∆∞∆°ng lai: Th√¥ng b√°o WebSocket, c·∫£nh b√°o email cho thay ƒë·ªïi tr·∫°ng th√°i

**Li√™n L·∫°c:**
- Kh√¥ng g·ª≠i email (t√≠ch h·ª£p SMTP)
- Kh√¥ng c√≥ th√¥ng b√°o SMS
- T∆∞∆°ng lai: Bi√™n lai email, c·∫≠p nh·∫≠t SMS

**Xu·∫•t & In:**
- Kh√¥ng xu·∫•t d·ªØ li·ªáu (CSV, Excel, PDF)
- Kh√¥ng in h√≥a ƒë∆°n/phi·∫øu
- T∆∞∆°ng lai: Xem phi·∫øu th√¢n thi·ªán in, h√≥a ƒë∆°n PDF

**T√¨m Ki·∫øm:**
- Kh√¥ng c√≥ t√¨m ki·∫øm to√†n c·ª•c tr√™n c√°c th·ª±c th·ªÉ
- L·ªçc h·∫°n ch·∫ø tr√™n trang danh s√°ch
- T∆∞∆°ng lai: T√¨m ki·∫øm to√†n vƒÉn v·ªõi Postgres `pg_trgm`

**Ph√¢n Trang:**
- Kh√¥ng ph√¢n trang tr√™n danh s√°ch d√†i (t·∫£i t·∫•t c·∫£ b·∫£n ghi)
- V·∫•n ƒë·ªÅ hi·ªáu su·∫•t ti·ªÅm ·∫©n v·ªõi t·∫≠p d·ªØ li·ªáu l·ªõn
- T∆∞∆°ng lai: Ph√¢n trang d·ª±a tr√™n cursor v·ªõi tRPC

**T√≠nh NƒÉng N√¢ng Cao:**
- Kh√¥ng c√≥ thao t√°c h√†ng lo·∫°t (c·∫≠p nh·∫≠t tr·∫°ng th√°i h√†ng lo·∫°t, x√≥a h√†ng lo·∫°t)
- Kh√¥ng c√≥ phi·∫øu ƒë·ªãnh k·ª≥ ho·∫∑c l·ªãch b·∫£o tr√¨
- Kh√¥ng c√≥ c·ªïng kh√°ch h√†ng (theo d√µi phi·∫øu t·ª± ph·ª•c v·ª•)
- Kh√¥ng c√≥ c·∫£nh b√°o t·ªìn kho (c·∫£nh b√°o t·ªìn kho th·∫•p)
- Kh√¥ng c√≥ UI nh·∫≠t k√Ω ki·ªÉm to√°n (database theo d√µi thay ƒë·ªïi, nh∆∞ng kh√¥ng c√≥ UI)

### N·ª£ K·ªπ Thu·∫≠t

**V·∫•n ƒê·ªÅ ƒê√£ Bi·∫øt:**
- M·ªôt s·ªë Server Components c√≥ th·ªÉ ƒë∆∞·ª£c t·ªëi ∆∞u v·ªõi streaming
- ƒê∆∞·ªùng d·∫´n l∆∞u tr·ªØ ƒë√≠nh k√®m ƒë∆∞·ª£c hardcode
- Ph·∫°m vi error boundary h·∫°n ch·∫ø
- M·ªôt s·ªë components c√≥ th·ªÉ ƒë∆∞·ª£c tr√≠ch xu·∫•t v√†o th∆∞ vi·ªán UI chia s·∫ª

**C·∫£i Ti·∫øn T∆∞∆°ng Lai:**
- Tri·ªÉn khai React Suspense to√†n di·ªán h∆°n
- Th√™m tests E2E v·ªõi Playwright
- Thi·∫øt l·∫≠p pipeline CI/CD
- Th√™m ghi log l·ªói to√†n di·ªán (Sentry, v.v.)
- Tri·ªÉn khai feature flags cho rollout d·∫ßn d·∫ßn

---

## T√≥m T·∫Øt

·ª®ng D·ª•ng Qu·∫£n L√Ω Trung T√¢m D·ªãch V·ª• l√† m·ªôt **h·ªá th·ªëng s·∫µn s√†ng production, gi√†u t√≠nh nƒÉng** v·ªõi:

‚úÖ **Theo d√µi phi·∫øu m·∫°nh m·∫Ω** v·ªõi ƒë√°nh s·ªë t·ª± ƒë·ªông v√† th·ª±c thi tr·∫°ng th√°i
‚úÖ **Qu·∫£n l√Ω t·ªìn kho** v·ªõi ƒëi·ªÅu ch·ªânh t·ªìn kho t·ª± ƒë·ªông
‚úÖ **Qu·∫£n l√Ω quan h·ªá kh√°ch h√†ng** v·ªõi theo d√µi l·ªãch s·ª≠
‚úÖ **Logic nghi·ªáp v·ª• t·ª± ƒë·ªông** (t√≠nh to√°n chi ph√≠, ghi ch√∫ t·ª± ƒë·ªông, triggers)
‚úÖ **Ph√¢n t√≠ch to√†n di·ªán** v·ªõi s·ªë li·ªáu b·∫£ng ƒëi·ªÅu khi·ªÉn th·ªùi gian th·ª±c
‚úÖ **Ki·ªÉm so√°t truy c·∫≠p d·ª±a tr√™n vai tr√≤** ·ªü c·∫•p database, API v√† UI
‚úÖ **An to√†n ki·ªÉu ƒë·∫ßu cu·ªëi** qua tRPC v√† TypeScript
‚úÖ **UI/UX hi·ªán ƒë·∫°i** v·ªõi thi·∫øt k·∫ø responsive v√† c·∫≠p nh·∫≠t l·∫°c quan
‚úÖ **X√°c th·ª±c an to√†n** v·ªõi Supabase Auth v√† qu·∫£n l√Ω phi√™n
‚úÖ **X·ª≠ l√Ω file** v·ªõi h·ªó tr·ª£ k√Ω t·ª± ti·∫øng Vi·ªát

·ª®ng d·ª•ng nh·∫•n m·∫°nh **an to√†n ki·ªÉu, b·∫£o m·∫≠t, tr·∫£i nghi·ªám developer, hi·ªáu su·∫•t v√† tr·∫£i nghi·ªám ng∆∞·ªùi d√πng** trong khi duy tr√¨ ch·∫•t l∆∞·ª£ng code v√† m·∫´u ki·∫øn tr√∫c xu·∫•t s·∫Øc.

---

**ƒê·ªÉ bi·∫øt chi ti·∫øt k·ªπ thu·∫≠t v√† quy tr√¨nh ph√°t tri·ªÉn, xem:**
- `CLAUDE.md` - H∆∞·ªõng d·∫´n ph√°t tri·ªÉn v√† ki·∫øn tr√∫c
- `docs/data/schemas/` - ƒê·ªãnh nghƒ©a schema database
- `src/server/routers/` - tRPC API endpoints

**T√†i li·ªáu ƒë∆∞·ª£c chu·∫©n b·ªã b·ªüi:** Sarah (Product Owner)
**D·ª±a tr√™n:** Ph√¢n t√≠ch codebase t√≠nh ƒë·∫øn 22/10/2025
