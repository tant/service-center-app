# H∆∞·ªõng d·∫´n Code Giao di·ªán (UI Coding Guide)

**Phi√™n b·∫£n:** 1.2
**C·∫≠p nh·∫≠t l·∫ßn cu·ªëi:** 2025-10-27

---

## Gi·ªõi thi·ªáu

T√†i li·ªáu n√†y ƒë·ªãnh nghƒ©a c√°c quy chu·∫©n v√† m·∫´u code ƒë·ªÉ x√¢y d·ª±ng giao di·ªán ng∆∞·ªùi d√πng (UI) cho c√°c trang trong ·ª©ng d·ª•ng Service Center. Vi·ªác tu√¢n th·ªß h∆∞·ªõng d·∫´n n√†y l√† **b·∫Øt bu·ªôc** ƒë·ªÉ ƒë·∫£m b·∫£o t√≠nh nh·∫•t qu√°n v·ªÅ m·∫∑t h√¨nh ·∫£nh v√† tr·∫£i nghi·ªám ng∆∞·ªùi d√πng (UX) tr√™n to√†n b·ªô ·ª©ng d·ª•ng.

**Trang tham kh·∫£o m·∫´u:**
*   `/catalog/products`
*   `/dashboard`

---

## 1. C·∫•u tr√∫c Trang (Page Structure)

M·ªçi trang hi·ªÉn th·ªã d·ªØ li·ªáu (data-driven page) ph·∫£i tu√¢n theo c·∫•u tr√∫c ph√¢n c·∫•p sau:

### C·∫•u tr√∫c JSX

```tsx
<>
  <PageHeader title="[Ti√™u ƒë·ªÅ trang]" />
  <div className="flex flex-1 flex-col">
    <div className="@container/main flex flex-1 flex-col gap-2">
      <div className="flex flex-col gap-4 py-4 md:gap-6 md:py-6">
        {/* C√°c th√†nh ph·∫ßn n·ªôi dung ch√≠nh ·ªü ƒë√¢y, v√≠ d·ª•: Tabs, Cards, Tables */}
        <[T√™nComponent] data={data} />
      </div>
    </div>
  </div>
</>
```

### C√°c l·ªõp (Classes) CSS b·∫Øt bu·ªôc

*   **Container ngo√†i c√πng:** `flex flex-1 flex-col`
*   **Wrapper cho container query:** `@container/main flex flex-1 flex-col gap-2`
*   **Wrapper n·ªôi dung (v·ªõi padding ƒë√°p ·ª©ng):** `flex flex-col gap-4 py-4 md:gap-6 md:py-6`

---

## 2. Style, Spacing v√† Padding

### Spacing (Kho·∫£ng c√°ch)

S·ª≠ d·ª•ng c√°c utility class c·ªßa Tailwind ƒë·ªÉ ƒë·∫£m b·∫£o kho·∫£ng c√°ch nh·∫•t qu√°n.

*   **Gi·ªØa c√°c section l·ªõn c·ªßa trang:** `gap-2`
*   **B√™n trong content wrapper:** `gap-4` (mobile), `md:gap-6` (desktop)
*   **Gi·ªØa c√°c button trong m·ªôt nh√≥m:** `gap-2`
*   **Gi·ªØa c√°c tr∆∞·ªùng trong form:** `gap-4`

### Padding (ƒê·ªám)

*   **Padding ngang c·ªßa trang:** `px-4` (mobile), `lg:px-6` (desktop)
*   **Padding d·ªçc c·ªßa trang:** `py-4` (mobile), `md:py-6` (desktop)

### Typography (Ki·ªÉu ch·ªØ)

*   **Ti√™u ƒë·ªÅ trang/section:** `text-lg font-semibold`
*   **Nh√£n (Labels):** `text-sm font-medium`
*   **N·ªôi dung b·∫£ng (Table cells):** `text-sm`
*   **Ch·ªØ nh·ªè (Badges, secondary info):** `text-xs`
*   **Ch·ªØ b·ªã l√†m m·ªù (Muted text):** `text-muted-foreground`

---

## 2.5. H·ªá Th·ªëng M√†u S·∫Øc & Badges (Color System & Badge Usage)

**‚ú® TI√äU CHU·∫®N M·ªöI (v1.1 - Oct 27, 2025)**

H·ªá th·ªëng m√†u s·∫Øc v√† badges ƒë∆∞·ª£c thi·∫øt k·∫ø ƒë·ªÉ t·∫°o visual hierarchy r√µ r√†ng, c·∫£i thi·ªán kh·∫£ nƒÉng qu√©t th√¥ng tin (scannability), v√† mang l·∫°i personality cho UI.

### 2.5.1. Nguy√™n T·∫Øc S·ª≠ D·ª•ng M√†u

**Quy t·∫Øc v√†ng:**
1. **M√†u c√≥ √Ω nghƒ©a** - M·ªói m√†u ph·∫£i truy·ªÅn t·∫£i th√¥ng tin c·ª• th·ªÉ
2. **Nh·∫•t qu√°n** - C√πng m·ªôt lo·∫°i d·ªØ li·ªáu ph·∫£i d√πng c√πng m√†u xuy√™n su·ªët app
3. **Ph√¢n bi·ªát** - C√°c category kh√°c nhau ph·∫£i c√≥ m√†u ri√™ng bi·ªát
4. **Dark mode** - T·∫•t c·∫£ m√†u ph·∫£i c√≥ variant cho dark mode
5. **Accessibility** - ƒê·∫£m b·∫£o contrast ratio ƒë·ªß (WCAG AA minimum)

### 2.5.2. Category Badge Pattern

**√Åp d·ª•ng cho:** Ph√¢n lo·∫°i d·ªØ li·ªáu (task types, product categories, service types, v.v.)

**C·∫•u tr√∫c:**
```tsx
// 1. Define color mappings (at component top level)
const CATEGORY_COLORS = {
  "Category 1": "bg-blue-100 text-blue-700 border-blue-300 dark:bg-blue-900/30 dark:text-blue-300 dark:border-blue-700",
  "Category 2": "bg-orange-100 text-orange-700 border-orange-300 dark:bg-orange-900/30 dark:text-orange-300 dark:border-orange-700",
  // ... more categories
} as const;

// 2. Optional: Define icons for visual recognition
const CATEGORY_ICONS = {
  "Category 1": "üîç",
  "Category 2": "üîß",
  // ... more icons
} as const;

// 3. Usage in table column
{
  accessorKey: "category",
  header: "Danh M·ª•c",
  cell: ({ row }) => {
    const category = row.original.category || "Default";
    const colorClass = CATEGORY_COLORS[category as keyof typeof CATEGORY_COLORS];
    return (
      <Badge variant="outline" className={colorClass}>
        {category}
      </Badge>
    );
  },
}
```

**B·∫£ng M√†u Chu·∫©n cho Categories:**

| Category Type | Color | Light Mode | Dark Mode | Use Case |
|--------------|-------|------------|-----------|----------|
| Inspection/Ki·ªÉm tra | Blue | `bg-blue-100 text-blue-700 border-blue-300` | `dark:bg-blue-900/30 dark:text-blue-300 dark:border-blue-700` | C√°c h√†nh ƒë·ªông ki·ªÉm tra, xem x√©t |
| Repair/S·ª≠a ch·ªØa | Orange | `bg-orange-100 text-orange-700 border-orange-300` | `dark:bg-orange-900/30 dark:text-orange-300 dark:border-orange-700` | S·ª≠a ch·ªØa, kh·∫Øc ph·ª•c |
| Replace/Thay th·∫ø | Purple | `bg-purple-100 text-purple-700 border-purple-300` | `dark:bg-purple-900/30 dark:text-purple-300 dark:border-purple-700` | Thay th·∫ø linh ki·ªán |
| Clean/V·ªá sinh | Green | `bg-green-100 text-green-700 border-green-300` | `dark:bg-green-900/30 dark:text-green-300 dark:border-green-700` | V·ªá sinh, l√†m s·∫°ch |
| Install/C√†i ƒë·∫∑t | Cyan | `bg-cyan-100 text-cyan-700 border-cyan-300` | `dark:bg-cyan-900/30 dark:text-cyan-300 dark:border-cyan-700` | C√†i ƒë·∫∑t, setup |
| Test/Ki·ªÉm tra cu·ªëi | Indigo | `bg-indigo-100 text-indigo-700 border-indigo-300` | `dark:bg-indigo-900/30 dark:text-indigo-300 dark:border-indigo-700` | Ki·ªÉm tra cu·ªëi, QA |
| Other/Kh√°c | Gray | `bg-gray-100 text-gray-700 border-gray-300` | `dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600` | C√°c lo·∫°i kh√°c |

### 2.5.3. Status Badge Pattern

**√Åp d·ª•ng cho:** Tr·∫°ng th√°i ho·∫°t ƒë·ªông (active/inactive, enabled/disabled, on/off)

**C·∫•u tr√∫c:**
```tsx
{
  accessorKey: "is_active",
  header: "Tr·∫°ng Th√°i",
  cell: ({ row }) => (
    <Badge
      variant={row.original.is_active ? "default" : "destructive"}
      className={row.original.is_active
        ? "bg-gradient-to-r from-green-100 to-emerald-100 text-green-700 border-green-300 dark:from-green-900/30 dark:to-emerald-900/30 dark:text-green-300 dark:border-green-700"
        : "bg-gradient-to-r from-red-100 to-rose-100 text-red-700 border-red-300 dark:from-red-900/30 dark:to-rose-900/30 dark:text-red-300 dark:border-red-700"
      }
    >
      <span className={row.original.is_active ? "text-green-600 dark:text-green-400" : "text-red-600 dark:text-red-400"}>
        {row.original.is_active ? "‚óè" : "‚óã"}
      </span>
      <span className="ml-1">{row.original.is_active ? "Ho·∫°t ƒë·ªông" : "V√¥ hi·ªáu"}</span>
    </Badge>
  ),
}
```

**Quy ∆∞·ªõc:**
- **Active/Enabled:** Gradient xanh l√° ‚Üí xanh emerald, filled dot (‚óè)
- **Inactive/Disabled:** Gradient ƒë·ªè ‚Üí ƒë·ªè h·ªìng, empty dot (‚óã)
- Lu√¥n d√πng gradient cho status badges ƒë·ªÉ t·∫°o visual depth

### 2.5.4. Boolean Badge Pattern

**√Åp d·ª•ng cho:** C√°c gi√° tr·ªã boolean (yes/no, required/optional, has/hasn't)

**C·∫•u tr√∫c:**
```tsx
// For positive boolean (Yes/C√≥/Required)
<Badge
  variant={value ? "default" : "secondary"}
  className={value
    ? "bg-emerald-100 text-emerald-700 border-emerald-300 dark:bg-emerald-900/30 dark:text-emerald-300 dark:border-emerald-700"
    : "bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400"
  }
>
  {value ? "‚úì C√≥" : "‚óã Kh√¥ng"}
</Badge>

// For specific boolean with icon context (e.g., photo required)
<Badge
  variant={requiresPhoto ? "default" : "secondary"}
  className={requiresPhoto
    ? "bg-sky-100 text-sky-700 border-sky-300 dark:bg-sky-900/30 dark:text-sky-300 dark:border-sky-700"
    : "bg-gray-100 text-gray-600 dark:bg-gray-800 dark:text-gray-400"
  }
>
  {requiresPhoto ? "üì∑ C√≥" : "‚óã Kh√¥ng"}
</Badge>
```

**Quy ∆∞·ªõc:**
- **True/Yes:** M√†u xanh (emerald ho·∫∑c sky t√πy context), checkmark (‚úì) ho·∫∑c icon ph√π h·ª£p
- **False/No:** M√†u x√°m, empty circle (‚óã)
- Th√™m icon emoji n·∫øu c√≥ context c·ª• th·ªÉ (üì∑ cho photo, üìù cho notes, v.v.)

### 2.5.5. Metric Badge Pattern

**√Åp d·ª•ng cho:** C√°c s·ªë li·ªáu c√≥ ng∆∞·ª°ng (duration, quantity, score)

**C·∫•u tr√∫c:**
```tsx
{
  accessorKey: "estimated_duration_minutes",
  header: "Th·ªùi Gian (ph√∫t)",
  cell: ({ row }) => {
    const duration = row.original.estimated_duration_minutes;
    if (!duration) {
      return <span className="text-sm text-muted-foreground">-</span>;
    }

    // Color coding based on thresholds
    let colorClass = "bg-green-50 text-green-700 border-green-300 dark:bg-green-900/30 dark:text-green-300 dark:border-green-700";
    if (duration > 60) {
      colorClass = "bg-amber-50 text-amber-700 border-amber-300 dark:bg-amber-900/30 dark:text-amber-300 dark:border-amber-700";
    } else if (duration > 30) {
      colorClass = "bg-yellow-50 text-yellow-700 border-yellow-300 dark:bg-yellow-900/30 dark:text-yellow-300 dark:border-yellow-700";
    }

    return (
      <Badge variant="outline" className={colorClass}>
        ‚è±Ô∏è {duration} ph√∫t
      </Badge>
    );
  },
}
```

**Quy ∆∞·ªõc:**
- **Low/Fast:** Xanh l√° (green)
- **Medium:** V√†ng (yellow)
- **High/Slow:** Cam/H·ªï ph√°ch (amber)
- Th√™m icon emoji ph√π h·ª£p (‚è±Ô∏è cho time, üìä cho metrics)

### 2.5.6. Icon Integration Pattern

**√Åp d·ª•ng cho:** TƒÉng visual recognition cho c√°c items trong b·∫£ng

**C·∫•u tr√∫c:**
```tsx
{
  accessorKey: "name",
  header: "T√™n",
  cell: ({ row }) => {
    const category = row.original.category || "Default";
    const icon = CATEGORY_ICONS[category as keyof typeof CATEGORY_ICONS];
    return (
      <div className="flex items-center gap-2">
        <span className="text-lg" role="img" aria-label={category}>
          {icon}
        </span>
        <span className="font-medium">{row.original.name}</span>
      </div>
    );
  },
}
```

**Quy ∆∞·ªõc:**
- Icon n·∫±m b√™n tr√°i text
- Gap 2 units (`gap-2`)
- Font size `text-lg` cho emoji icons
- Th√™m `role="img"` v√† `aria-label` cho accessibility

### 2.5.7. Best Practices

**DO:**
- ‚úÖ S·ª≠ d·ª•ng const objects v·ªõi `as const` cho type safety
- ‚úÖ Lu√¥n c√≥ dark mode variant
- ‚úÖ S·ª≠ d·ª•ng gradient cho status badges
- ‚úÖ Th√™m icons ƒë·ªÉ tƒÉng visual recognition
- ‚úÖ S·ª≠ d·ª•ng semantic colors (xanh = t·ªët, ƒë·ªè = c·∫£nh b√°o)
- ‚úÖ T·∫°o color mappings ·ªü top level c·ªßa component

**DON'T:**
- ‚ùå Inline colors tr·ª±c ti·∫øp trong JSX
- ‚ùå D√πng c√πng m·ªôt m√†u cho nhi·ªÅu √Ω nghƒ©a kh√°c nhau
- ‚ùå Qu√™n dark mode variants
- ‚ùå D√πng qu√° nhi·ªÅu m√†u (t·ªëi ƒëa 7-8 m√†u cho m·ªôt category system)
- ‚ùå B·ªè qua accessibility (icons ph·∫£i c√≥ aria-label)

### 2.5.8. V√≠ D·ª• Th·ª±c T·∫ø

**Tham kh·∫£o implementation:** `/src/components/tables/task-types-table.tsx`

File n√†y l√† reference implementation ƒë·∫ßy ƒë·ªß c·ªßa t·∫•t c·∫£ patterns tr√™n.

---

## 2.6. Shared Components & Code Reusability

**‚ú® TI√äU CHU·∫®N M·ªöI (v1.2 - Oct 27, 2025)**

ƒê·ªÉ tr√°nh code duplication v√† ƒë·∫£m b·∫£o t√≠nh nh·∫•t qu√°n, **LU√îN S·ª¨ D·ª§NG** c√°c shared components c√≥ s·∫µn thay v√¨ t·ª± implement l·∫°i logic t∆∞∆°ng t·ª±.

### 2.6.1. Nguy√™n T·∫Øc DRY (Don't Repeat Yourself)

**Quy t·∫Øc v√†ng:**
1. **Ki·ªÉm tra tr∆∞·ªõc khi code** - Lu√¥n search codebase ƒë·ªÉ t√¨m implementation t∆∞∆°ng t·ª±
2. **T√°i s·ª≠ d·ª•ng** - D√πng shared components thay v√¨ copy-paste
3. **Refactor khi th·∫•y repetition** - N·∫øu th·∫•y code l·∫∑p l·∫°i ‚â•3 l·∫ßn, extract th√†nh component
4. **Single source of truth** - M·ªói pattern ch·ªâ n√™n c√≥ 1 implementation ch√≠nh

### 2.6.2. TablePagination Component

**Component:** `src/components/ui/table-pagination.tsx`

**√Åp d·ª•ng cho:** T·∫§T C·∫¢ c√°c b·∫£ng c√≥ ph√¢n trang

**‚ùå KH√îNG L√ÄM:**
```tsx
// ƒê·ª´ng t·ª± implement pagination UI (~70-80 lines)
<div className="flex items-center justify-between px-4 lg:px-6">
  <div className="flex-1 text-sm text-muted-foreground">
    {table.getFilteredSelectedRowModel().rows.length > 0 && (
      <span>ƒê√£ ch·ªçn {table.getFilteredSelectedRowModel().rows.length} trong {table.getFilteredRowModel().rows.length}</span>
    )}
  </div>
  <div className="flex w-full items-center gap-8 lg:w-fit">
    <div className="hidden items-center gap-2 lg:flex">
      <Label htmlFor="rows-per-page">H√†ng tr√™n trang</Label>
      <Select value={`${pageSize}`} onValueChange={...}>
        {/* 30+ more lines */}
      </Select>
    </div>
    {/* 40+ more lines of pagination controls */}
  </div>
</div>
```

**‚úÖ ƒê√öNG:**
```tsx
import { TablePagination } from "@/components/ui/table-pagination";

// Ch·ªâ 1 d√≤ng thay th·∫ø ~70-80 lines
<TablePagination table={table} labelId="rows-per-page-products" />
```

**Props:**
- `table` - TanStack Table instance
- `labelId` - Unique ID cho label "H√†ng tr√™n trang" (ƒë·ªÉ tr√°nh conflict khi c√≥ nhi·ªÅu table)

**Features:**
- ‚úÖ Selection count display
- ‚úÖ Page size selector (10, 20, 30, 40, 50)
- ‚úÖ Current page indicator
- ‚úÖ First/Previous/Next/Last navigation buttons
- ‚úÖ Responsive design (mobile + desktop)
- ‚úÖ Consistent styling across all tables

**ƒê√£ √°p d·ª•ng cho 8 tables:**
1. `physical-warehouse-table.tsx`
2. `virtual-warehouse-table.tsx`
3. `team-table.tsx`
4. `brands-table.tsx`
5. `parts-table.tsx`
6. `product-table.tsx`
7. `customer-table.tsx`
8. `ticket-table.tsx`

### 2.6.3. FormDrawer Component

**Component:** `src/components/ui/form-drawer.tsx`

**√Åp d·ª•ng cho:** T·∫§T C·∫¢ c√°c form trong Drawer (th√™m/s·ª≠a entities)

**‚ùå KH√îNG L√ÄM:**
```tsx
// ƒê·ª´ng t·ª± implement drawer wrapper (~150-200 lines)
<Drawer open={open} onOpenChange={setOpen} direction={isMobile ? "bottom" : "right"}>
  <DrawerTrigger asChild>{trigger}</DrawerTrigger>
  <DrawerContent>
    <DrawerHeader>
      <DrawerTitle>{title}</DrawerTitle>
      <DrawerDescription>{description}</DrawerDescription>
    </DrawerHeader>
    <div className="flex flex-col gap-4 overflow-y-auto px-4 text-sm">
      {/* Form fields */}
    </div>
    <DrawerFooter>
      <Button onClick={handleSubmit} disabled={isLoading}>
        {submitLabel}
      </Button>
      <DrawerClose asChild>
        <Button variant="outline">H·ªßy b·ªè</Button>
      </DrawerClose>
    </DrawerFooter>
  </DrawerContent>
</Drawer>
```

**‚úÖ ƒê√öNG:**
```tsx
import { FormDrawer } from "@/components/ui/form-drawer";

<FormDrawer
  open={open}
  onOpenChange={setOpen}
  trigger={trigger}
  title="Th√™m S·∫£n Ph·∫©m M·ªõi"
  description="T·∫°o s·∫£n ph·∫©m m·ªõi trong danh m·ª•c"
  isSubmitting={isLoading}
  onSubmit={handleSubmit}
  submitLabel={isLoading ? "ƒêang t·∫°o..." : "T·∫°o s·∫£n ph·∫©m"}
  cancelLabel="H·ªßy b·ªè"
>
  {/* Form fields only */}
</FormDrawer>
```

**Props:**
- `open` - Boolean state
- `onOpenChange` - State setter
- `trigger?` - Optional trigger button
- `title?` - Simple string title
- `titleElement?` - Custom React element for complex titles (e.g., with Avatar)
- `description?` - Drawer description
- `isSubmitting` - Loading state
- `onSubmit` - Submit handler
- `submitLabel` - Submit button text
- `cancelLabel?` - Cancel button text (default: "H·ªßy b·ªè")
- `submitDisabled?` - Disable submit button
- `headerClassName?` - Custom header styling
- `children` - Form content

**Advanced: Custom Title with Avatar**
```tsx
<FormDrawer
  open={open}
  onOpenChange={setOpen}
  trigger={trigger}
  titleElement={
    <div className="flex items-center gap-3">
      <Avatar className="size-10">
        <AvatarImage src={member?.avatar_url} />
        <AvatarFallback>{member?.full_name?.[0]}</AvatarFallback>
      </Avatar>
      {mode === "add" ? "Th√™m Nh√¢n Vi√™n M·ªõi" : member?.full_name}
    </div>
  }
  description="C·∫≠p nh·∫≠t th√¥ng tin nh√¢n vi√™n"
  isSubmitting={isLoading}
  onSubmit={handleSubmit}
  submitLabel="L∆∞u thay ƒë·ªïi"
  headerClassName="gap-1"
>
  {/* Form fields */}
</FormDrawer>
```

**Features:**
- ‚úÖ Automatic mobile/desktop direction (bottom/right)
- ‚úÖ Consistent header/footer layout
- ‚úÖ Loading state management
- ‚úÖ Scrollable content area
- ‚úÖ Support for simple string titles OR complex custom title elements
- ‚úÖ Customizable header styling

**ƒê√£ √°p d·ª•ng cho c√°c forms:**
1. Task type management
2. Template management
3. Warehouse management
4. Team member management
5. (C√≥ th·ªÉ m·ªü r·ªông cho products, parts, brands, customers)

### 2.6.4. Impact & Benefits

**T·ª´ c√°c refactoring v·ª´a qua:**

| Metric | Before | After | Improvement |
|--------|--------|-------|-------------|
| Total code removed | - | ~700 lines | Reduced duplication |
| Tables using TablePagination | 0 | 8 | 100% coverage |
| Forms using FormDrawer | 0 | 4+ | Growing adoption |
| Bundle size (avg) | Higher | 5-15 kB | Optimized |
| Maintainability | Low | High | Single source of truth |

**L·ª£i √≠ch:**
- ‚ö° **Faster development** - Kh√¥ng c·∫ßn implement l·∫°i pagination/drawer
- üéØ **Consistency** - T·∫•t c·∫£ tables/forms c√≥ c√πng UX
- üîß **Easy maintenance** - Fix bug m·ªôt l·∫ßn, apply cho t·∫•t c·∫£
- üì¶ **Smaller bundles** - Code reuse gi·∫£m bundle size
- ‚úÖ **Type safety** - Shared components c√≥ proper TypeScript types

### 2.6.5. Best Practices

**Khi t·∫°o component m·ªõi:**
1. ‚úÖ Check xem ƒë√£ c√≥ shared component ch∆∞a (search trong `src/components/ui/`)
2. ‚úÖ N·∫øu th·∫•y pattern l·∫∑p l·∫°i ‚â•3 l·∫ßn ‚Üí extract th√†nh shared component
3. ‚úÖ ƒê·∫∑t shared components trong `src/components/ui/`
4. ‚úÖ Export proper TypeScript interfaces
5. ‚úÖ Document props v√† usage examples
6. ‚úÖ Ensure responsive design (mobile + desktop)
7. ‚úÖ Add dark mode support

**Khi refactor existing code:**
1. ‚úÖ Identify repetitive patterns across files
2. ‚úÖ Create shared component with flexible props
3. ‚úÖ Migrate existing code to use shared component
4. ‚úÖ Verify build succeeds
5. ‚úÖ Test on multiple breakpoints
6. ‚úÖ Update documentation (nh∆∞ guide n√†y)

---

## 3. H·ªá th·ªëng Tabs (Tabs System)

T·∫•t c·∫£ c√°c trang d·∫°ng b·∫£ng (table pages) PH·∫¢I s·ª≠ d·ª•ng component `Tabs` v·ªõi c√°c bi·∫øn th·ªÉ cho mobile v√† desktop ƒë·ªÉ chuy·ªÉn ƒë·ªïi gi·ªØa c√°c view (v√≠ d·ª•: l·ªçc theo tr·∫°ng th√°i).

### C·∫•u tr√∫c Tabs

```tsx
<Tabs defaultValue="[default-tab]" className="w-full flex-col justify-start gap-6">
  {/* H√†ng 1: B·ªô ch·ªçn View / Tabs + C√°c n√∫t h√†nh ƒë·ªông */}
  <div className="flex items-center justify-between px-4 lg:px-6">
    {/* Mobile: Select Dropdown */}
    <Select defaultValue="[default-tab]">
      <SelectTrigger className="flex w-fit @4xl/main:hidden" size="sm">
        <SelectValue placeholder="[Placeholder]" />
      </SelectTrigger>
      <SelectContent>
        <SelectItem value="tab1">T√™n Tab 1</SelectItem>
        <SelectItem value="tab2">T√™n Tab 2</SelectItem>
      </SelectContent>
    </Select>

    {/* Desktop: Tab List */}
    <TabsList className="hidden @4xl/main:flex">
      <TabsTrigger value="tab1">T√™n Tab 1</TabsTrigger>
      <TabsTrigger value="tab2">T√™n Tab 2</TabsTrigger>
    </TabsList>

    {/* C√°c n√∫t h√†nh ƒë·ªông */}
    <div className="flex items-center gap-2">
      {/* C√°c n√∫t ·ªü ƒë√¢y */}
    </div>
  </div>

  {/* N·ªôi dung c√°c Tab */}
  <TabsContent value="tab1" className="relative flex flex-col gap-4 px-4 lg:px-6">
    {/* N·ªôi dung */}
  </TabsContent>
</Tabs>
```

*   **Breakpoint ƒë√°p ·ª©ng:** S·ª≠ d·ª•ng container query `@4xl/main` ƒë·ªÉ chuy·ªÉn ƒë·ªïi gi·ªØa `Select` (mobile) v√† `TabsList` (desktop).
*   **C√°c n√∫t h√†nh ƒë·ªông:** Lu√¥n ƒë∆∞·ª£c cƒÉn ph·∫£i, bao g·ªìm c√°c h√†nh ƒë·ªông ch√≠nh nh∆∞ "Th√™m m·ªõi" v√† c√°c t√πy ch·ªçn nh∆∞ t√πy ch·ªânh c·ªôt.

---

## 4. B·∫£ng (Tables)

C√°c trang hi·ªÉn th·ªã danh s√°ch d·ªØ li·ªáu ph·∫£i s·ª≠ d·ª•ng c·∫•u tr√∫c b·∫£ng ti√™u chu·∫©n.

### C·∫•u tr√∫c B·∫£ng

```tsx
<div className="overflow-hidden rounded-lg border">
  <Table>
    <TableHeader className="bg-muted sticky top-0 z-10">
      {/* Headers ·ªü ƒë√¢y */}
    </TableHeader>
    <TableBody>
      {/* Rows ho·∫∑c Tr·∫°ng th√°i R·ªóng ·ªü ƒë√¢y */}
    </TableBody>
  </Table>
</div>
```

*   **Ti√™u ƒë·ªÅ B·∫£ng (Header):** Ph·∫£i `sticky` v√† c√≥ n·ªÅn `bg-muted` ƒë·ªÉ lu√¥n hi·ªÉn th·ªã khi cu·ªôn.
*   **Container:** B·∫£ng ph·∫£i ƒë∆∞·ª£c bao b·ªçc b·ªüi m·ªôt `div` c√≥ `overflow-hidden rounded-lg border`.

### C√°c C·ªôt Ti√™u chu·∫©n

1.  **C·ªôt Ch·ªçn (Select):** D√†nh cho c√°c thao t√°c h√†ng lo·∫°t.
2.  **C·ªôt Ch√≠nh (T√™n/Name):** Ph·∫£i l√† m·ªôt `Button` c√≥ th·ªÉ nh·∫•p ƒë·ªÉ m·ªü `Drawer` ch·ªânh s·ª≠a.
3.  **C·ªôt H√†nh ƒë·ªông (Actions):**
    *   ƒê·ªÉ ƒë·∫£m b·∫£o t√≠nh nh·∫•t qu√°n v√† ti·∫øt ki·ªám kh√¥ng gian, t·∫•t c·∫£ c√°c h√†nh ƒë·ªông cho m·ªôt h√†ng ph·∫£i ƒë∆∞·ª£c ƒë·∫∑t b√™n trong m·ªôt `DropdownMenu`.
    *   Trigger ƒë·ªÉ m·ªü menu n√†y PH·∫¢I l√† m·ªôt `Button` **ch·ªâ c√≥ icon** (icon-only) v·ªõi `variant="ghost"`. Bi·ªÉu t∆∞·ª£ng ƒë∆∞·ª£c khuy·∫øn ngh·ªã l√† "d·∫•u ba ch·∫•m" (v√≠ d·ª•: `IconDots`).
    *   **Kh√¥ng** hi·ªÉn th·ªã nhi·ªÅu icon h√†nh ƒë·ªông ri√™ng l·∫ª tr√™n m·ªói h√†ng.
    *   **Kh√¥ng** s·ª≠ d·ª•ng c√°ch ti·∫øp c·∫≠n hybrid (m·ªôt icon ri√™ng v√† m·ªôt menu).
    *   **L√Ω do:** C√°ch ti·∫øp c·∫≠n n√†y ho·∫°t ƒë·ªông t·ªët nh·∫•t tr√™n c·∫£ desktop v√† mobile, c√≥ kh·∫£ nƒÉng m·ªü r·ªông v√† gi·ªØ cho giao di·ªán b·∫£ng g·ªçn g√†ng.

### CƒÉn l·ªÅ v√† Padding cho √î (Cell Alignment & Padding)

ƒê·ªÉ ƒë·∫£m b·∫£o layout c·ªßa b·∫£ng nh·∫•t qu√°n v√† d·ªÖ ƒë·ªçc, h√£y tu√¢n th·ªß c√°c quy t·∫Øc v·ªÅ padding cho c√°c c·ªôt ƒë·∫ßu ti√™n.

**Quy t·∫Øc chung:**
*   T·∫•t c·∫£ c√°c √¥ ch·ª©a d·ªØ li·ªáu vƒÉn b·∫£n (`TableCell`) ph·∫£i c√≥ padding m·∫∑c ƒë·ªãnh c·ªßa `shadcn/ui`, t·ª©c l√† `px-4` ·ªü hai b√™n.

**C·∫•u tr√∫c c√°c c·ªôt ƒë·∫ßu ti√™n:**

1.  **C·ªôt K√©o-th·∫£ (Drag Handle) (n·∫øu c√≥):**
    *   ƒê√¢y l√† c·ªôt ƒë·∫ßu ti√™n.
    *   `TableCell` ch·ª©a n√≥ n√™n c√≥ `className="p-0 w-8"`.
    *   B√™n trong l√† m·ªôt `Button` `variant="ghost"` ƒë·ªÉ ch·ª©a icon `IconGripVertical`.
    *   **V√≠ d·ª• (`customer-table.tsx`):**
        ```tsx
        {
          id: "drag",
          header: () => null,
          cell: ({ row }) => <DragHandle id={row.original.id} />,
        }
        ```

2.  **C·ªôt Ch·ªçn (Checkbox) (n·∫øu c√≥):**
    *   ƒê√¢y l√† c·ªôt th·ª© hai (n·∫øu c√≥ c·ªôt drag) ho·∫∑c c·ªôt ƒë·∫ßu ti√™n (n·∫øu kh√¥ng c√≥).
    *   `TableCell` ch·ª©a n√≥ n√™n c√≥ `className="p-0"`.
    *   B√™n trong l√† m·ªôt `div` v·ªõi `className="flex items-center justify-center"` ƒë·ªÉ cƒÉn gi·ªØa `Checkbox`.
    *   **V√≠ d·ª• (`parts-table.tsx`):**
        ```tsx
        {
          id: "select",
          cell: ({ row }) => (
            <div className="flex items-center justify-center">
              <Checkbox ... />
            </div>
          ),
        }
        ```

3.  **C·ªôt D·ªØ li·ªáu ƒê·∫ßu ti√™n (First Data Column):**
    *   ƒê√¢y l√† c·ªôt ch·ª©a n·ªôi dung ch√≠nh ƒë·∫ßu ti√™n (v√≠ d·ª•: T√™n s·∫£n ph·∫©m, T√™n kh√°ch h√†ng).
    *   `TableCell` c·ªßa c·ªôt n√†y **kh√¥ng c·∫ßn th√™m class t√πy ch·ªânh** v√† s·∫Ω t·ª± ƒë·ªông nh·∫≠n padding `px-4` m·∫∑c ƒë·ªãnh. ƒêi·ªÅu n√†y t·∫°o ra kho·∫£ng tr·ªëng c·∫ßn thi·∫øt so v·ªõi l·ªÅ tr√°i ho·∫∑c so v·ªõi c·ªôt checkbox/drag handle.

### Tr·∫°ng th√°i R·ªóng (Empty State)

Khi b·∫£ng kh√¥ng c√≥ d·ªØ li·ªáu ƒë·ªÉ hi·ªÉn th·ªã, PH·∫¢I hi·ªÉn th·ªã m·ªôt h√†ng duy nh·∫•t b√™n trong `<TableBody>` v·ªõi m·ªôt th√¥ng b√°o r√µ r√†ng.

**Quan tr·ªçng:** `TableHeader` c·ªßa b·∫£ng **lu√¥n lu√¥n** ph·∫£i ƒë∆∞·ª£c hi·ªÉn th·ªã, ngay c·∫£ khi kh√¥ng c√≥ d·ªØ li·ªáu. ƒêi·ªÅu n√†y ƒë·∫£m b·∫£o ng∆∞·ªùi d√πng lu√¥n th·∫•y ƒë∆∞·ª£c c·∫•u tr√∫c c·ªßa b·∫£ng v√† c√°c n√∫t h√†nh ƒë·ªông li√™n quan (nh∆∞ "Th√™m m·ªõi") v·∫´n hi·ªÉn th·ªã, tr√°nh thay ƒë·ªïi layout ƒë·ªôt ng·ªôt.

**C·∫•u tr√∫c:**
```tsx
<TableBody>
  {table.getRowModel().rows?.length ? (
    table.getRowModel().rows.map((row) => (
      // ... render a <TableRow> for each data row
    ))
  ) : (
    <TableRow>
      <TableCell colSpan={columns.length} className="h-24 text-center">
        Kh√¥ng t√¨m th·∫•y [t√™n ƒë·ªëi t∆∞·ª£ng] n√†o.
      </TableCell>
    </TableRow>
  )}
</TableBody>
```
*   **`colSpan`:** Ph·∫£i b·∫±ng t·ªïng s·ªë c·ªôt ƒë·ªÉ th√¥ng b√°o chi·∫øm to√†n b·ªô chi·ªÅu r·ªông c·ªßa b·∫£ng.
*   **Styling:** S·ª≠ d·ª•ng `h-24 text-center` ƒë·ªÉ ƒë·∫£m b·∫£o th√¥ng b√°o ƒë∆∞·ª£c cƒÉn gi·ªØa v√† c√≥ ƒë·ªß kh√¥ng gian.
*   **N·ªôi dung:** Th√¥ng b√°o ph·∫£i b·∫±ng ti·∫øng Vi·ªát v√† th√¢n thi·ªán v·ªõi ng∆∞·ªùi d√πng (v√≠ d·ª•: "Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m n√†o.").

### Thanh T√¨m ki·∫øm v√† L·ªçc

*   Lu√¥n ƒë·∫∑t m·ªôt thanh t√¨m ki·∫øm `Input` ph√≠a tr√™n b·∫£ng v·ªõi `placeholder` ti·∫øng Vi·ªát.
*   **ƒê·ªô r·ªông t·ªëi ƒëa:** `max-w-sm`.

### Ph√¢n trang (Pagination)

**‚ö†Ô∏è B·∫ÆT BU·ªòC: S·ª≠ d·ª•ng `TablePagination` Component**

T·∫•t c·∫£ c√°c b·∫£ng ph·∫£i s·ª≠ d·ª•ng component `TablePagination` ƒë·ªÉ ƒë·∫£m b·∫£o t√≠nh nh·∫•t qu√°n v√† tr√°nh code duplication.

**C·∫•u tr√∫c:**
```tsx
import { TablePagination } from "@/components/ui/table-pagination";

<TablePagination table={table} labelId="rows-per-page-[table-name]" />
```

**KH√îNG t·ª± implement pagination UI.** Component n√†y cung c·∫•p ƒë·∫ßy ƒë·ªß:
*   **ƒê·∫øm s·ªë l∆∞·ª£ng ƒë√£ ch·ªçn:** (v√≠ d·ª•: "ƒê√£ ch·ªçn 5 trong 50")
*   **Ch·ªçn k√≠ch th∆∞·ªõc trang:** (10, 20, 30, 40, 50)
*   **Th√¥ng tin trang:** (v√≠ d·ª•: "Trang 1 tr√™n 10")
*   **C√°c n√∫t ƒëi·ªÅu h∆∞·ªõng:** Trang ƒë·∫ßu, Trang tr∆∞·ªõc, Trang ti·∫øp, Trang cu·ªëi

**Xem th√™m:** Section 2.6.2 - TablePagination Component

---

## 5. Th·∫ª (Cards)

S·ª≠ d·ª•ng `Card` t·ª´ th∆∞ vi·ªán `shadcn/ui` ƒë·ªÉ nh√≥m c√°c th√¥ng tin li√™n quan, ƒë·∫∑c bi·ªát l√† tr√™n c√°c trang dashboard.

### C·∫•u tr√∫c Card

```tsx
import { Card, CardHeader, CardTitle, CardDescription, CardContent, CardFooter } from "@/components/ui/card";

<Card>
  <CardHeader>
    <CardTitle>[Ti√™u ƒë·ªÅ Card]</CardTitle>
    <CardDescription>[M√¥ t·∫£ ng·∫Øn]</CardDescription>
  </CardHeader>
  <CardContent>
    {/* N·ªôi dung ch√≠nh c·ªßa card, v√≠ d·ª•: bi·ªÉu ƒë·ªì, danh s√°ch */}
  </CardContent>
  <CardFooter>
    {/* C√°c h√†nh ƒë·ªông ho·∫∑c th√¥ng tin ph·ª• */}
  </CardFooter>
</Card>
```

### V√≠ d·ª•: Card tr√™n Dashboard

Tr√™n trang `/dashboard`, c√°c th·∫ª ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ hi·ªÉn th·ªã c√°c s·ªë li·ªáu th·ªëng k√™ nhanh (v√≠ d·ª•: "Doanh thu th√°ng n√†y", "Phi·∫øu ch·ªù x·ª≠ l√Ω"). Ch√∫ng th∆∞·ªùng ch·ªâ ch·ª©a `CardHeader` v√† `CardContent`.

---

## 6. NgƒÉn k√©o (Drawers) cho Form

ƒê·ªÉ ƒë·∫£m b·∫£o tr·∫£i nghi·ªám ng∆∞·ªùi d√πng nh·∫•t qu√°n, t·∫•t c·∫£ c√°c h√†nh ƒë·ªông **t·∫°o m·ªõi** ho·∫∑c **ch·ªânh s·ª≠a** c√°c m·ª•c ph·ª©c t·∫°p (v√≠ d·ª•: s·∫£n ph·∫©m, kh√°ch h√†ng) PH·∫¢I s·ª≠ d·ª•ng component `FormDrawer`.

`FormDrawer` l√† shared component cung c·∫•p nhi·ªÅu kh√¥ng gian cho c√°c bi·ªÉu m·∫´u ph·ª©c t·∫°p, x·ª≠ l√Ω responsive behavior t·ª± ƒë·ªông, v√† mang l·∫°i tr·∫£i nghi·ªám ng∆∞·ªùi d√πng hi·ªán ƒë·∫°i nh·∫•t qu√°n.

### H√†nh vi v√† Giao di·ªán

*   **Desktop:** Drawer s·∫Ω tr∆∞·ª£t ra t·ª´ **b√™n ph·∫£i** c·ªßa m√†n h√¨nh.
*   **Mobile:** Drawer s·∫Ω tr∆∞·ª£t l√™n t·ª´ **d∆∞·ªõi c√πng** c·ªßa m√†n h√¨nh.
*   **T·ª± ƒë·ªông detect:** Component t·ª± x·ª≠ l√Ω responsive behavior, kh√¥ng c·∫ßn `useIsMobile()`.

### C·∫•u tr√∫c Drawer (Khuy·∫øn ngh·ªã)

**‚ö†Ô∏è B·∫ÆT BU·ªòC: S·ª≠ d·ª•ng `FormDrawer` Component**

```tsx
import { FormDrawer } from "@/components/ui/form-drawer";

function MyEntityModal({ mode, trigger, onSuccess, entity }) {
  const [open, setOpen] = React.useState(false);

  // ... (logic form v√† state)

  return (
    <FormDrawer
      open={open}
      onOpenChange={setOpen}
      trigger={trigger}
      title={mode === "add" ? "Th√™m S·∫£n Ph·∫©m M·ªõi" : "Ch·ªânh s·ª≠a S·∫£n Ph·∫©m"}
      description={mode === "add"
        ? "T·∫°o s·∫£n ph·∫©m m·ªõi trong danh m·ª•c"
        : "C·∫≠p nh·∫≠t th√¥ng tin s·∫£n ph·∫©m"}
      isSubmitting={isLoading}
      onSubmit={handleSubmit}
      submitLabel={isLoading
        ? (mode === "add" ? "ƒêang t·∫°o..." : "ƒêang c·∫≠p nh·∫≠t...")
        : (mode === "add" ? "T·∫°o s·∫£n ph·∫©m" : "L∆∞u thay ƒë·ªïi")}
      submitDisabled={!isValid}
    >
      {/* Ch·ªâ c·∫ßn vi·∫øt form fields, kh√¥ng c·∫ßn wrapper */}
      <div className="flex flex-col gap-4">
        <Label>T√™n s·∫£n ph·∫©m</Label>
        <Input ... />
        {/* More fields */}
      </div>
    </FormDrawer>
  );
}
```

**Xem th√™m:** Section 2.6.3 - FormDrawer Component

### C·∫•u tr√∫c Drawer (C√°ch c≈© - Deprecated)

**‚ö†Ô∏è KH√îNG KHUY·∫æN KH√çCH** - Ch·ªâ s·ª≠ d·ª•ng n·∫øu c√≥ requirements ƒë·∫∑c bi·ªát kh√¥ng ph√π h·ª£p v·ªõi FormDrawer.

<details>
<summary>Xem c√°ch implement th·ªß c√¥ng (deprecated)</summary>

```tsx
import {
  Drawer,
  DrawerClose,
  DrawerContent,
  DrawerDescription,
  DrawerFooter,
  DrawerHeader,
  DrawerTitle,
  DrawerTrigger,
} from "@/components/ui/drawer";

function MyEntityModal({ mode, trigger, onSuccess }) {
  const isMobile = useIsMobile(); // Hook ƒë·ªÉ ki·ªÉm tra thi·∫øt b·ªã
  const [open, setOpen] = React.useState(false);

  // ... (logic form v√† state)

  return (
    <Drawer
      open={open}
      onOpenChange={setOpen}
      direction={isMobile ? "bottom" : "right"}
    >
      <DrawerTrigger asChild>{trigger}</DrawerTrigger>
      <DrawerContent>
        <DrawerHeader>
          <DrawerTitle>[Ti√™u ƒë·ªÅ, v√≠ d·ª•: "Th√™m S·∫£n Ph·∫©m M·ªõi"]</DrawerTitle>
          <DrawerDescription>
            [M√¥ t·∫£ ng·∫Øn g·ªçn v·ªÅ ch·ª©c nƒÉng c·ªßa form].
          </DrawerDescription>
        </DrawerHeader>

        {/* N·ªôi dung ch√≠nh, th∆∞·ªùng l√† m·ªôt form c√≥ th·ªÉ cu·ªôn */}
        <div className="flex flex-col gap-4 overflow-y-auto px-4 text-sm">
          <MyForm />
        </div>

        <DrawerFooter>
          <Button onClick={handleSubmit} disabled={isLoading}>
            {isLoading ? "ƒêang x·ª≠ l√Ω..." : "L∆∞u"}
          </Button>
          <DrawerClose asChild>
            <Button variant="outline" disabled={isLoading}>
              H·ªßy b·ªè
            </Button>
          </DrawerClose>
        </DrawerFooter>
      </DrawerContent>
    </Drawer>
  );
}
```

**V·∫•n ƒë·ªÅ v·ªõi c√°ch n√†y:**
- ‚ùå T·ªën ~150-200 lines code m·ªói form
- ‚ùå Ph·∫£i t·ª± handle `useIsMobile()`
- ‚ùå Code duplication cao
- ‚ùå Kh√≥ maintain khi c·∫ßn thay ƒë·ªïi layout

</details>

### Khi n√†o s·ª≠ d·ª•ng Drawer

*   S·ª≠ d·ª•ng cho c√°c h√†nh ƒë·ªông **T·∫°o m·ªõi** v√† **Ch·ªânh s·ª≠a** c√≥ ƒë·ªô ph·ª©c t·∫°p v·ª´a ph·∫£i (v√≠ d·ª•: qu·∫£n l√Ω s·∫£n ph·∫©m, kh√°ch h√†ng).
*   Khi ng∆∞·ªùi d√πng nh·∫•p v√†o n√∫t "Th√™m m·ªõi" tr√™n thanh action c·ªßa b·∫£ng.
*   Khi ng∆∞·ªùi d√πng nh·∫•p v√†o m·ªôt m·ª•c trong c·ªôt ch√≠nh c·ªßa b·∫£ng ƒë·ªÉ ch·ªânh s·ª≠a.
*   **L∆∞u √Ω:** ƒê·ªëi v·ªõi c√°c ƒë·ªëi t∆∞·ª£ng r·∫•t ph·ª©c t·∫°p (v√≠ d·ª•: phi·∫øu s·ª≠a ch·ªØa, quy tr√¨nh l√†m vi·ªác), h√£y s·ª≠ d·ª•ng m·ªôt **trang chuy√™n d·ª•ng** (xem m·ª•c 7).

### Bi·ªÉu m·∫´u (Forms) b√™n trong Drawer

*   N·ªôi dung ch√≠nh c·ªßa `Drawer` n√™n l√† m·ªôt bi·ªÉu m·∫´u (`<form>`).
*   S·ª≠ d·ª•ng `react-hook-form` v√† `zod` ƒë·ªÉ qu·∫£n l√Ω v√† x√°c th·ª±c.
*   C√°c tr∆∞·ªùng trong bi·ªÉu m·∫´u ph·∫£i tu√¢n theo c√°c quy t·∫Øc v·ªÅ spacing (`gap-4`).
*   C√°c n√∫t h√†nh ƒë·ªông ch√≠nh ("L∆∞u", "T·∫°o") v√† n√∫t "H·ªßy" ph·∫£i n·∫±m trong `DrawerFooter`.

---

## 7. Trang Chuy√™n d·ª•ng cho Th√™m/S·ª≠a (Dedicated Add/Edit Pages)

ƒê·ªëi v·ªõi c√°c ƒë·ªëi t∆∞·ª£ng c√≥ ƒë·ªô ph·ª©c t·∫°p cao (v√≠ d·ª•: m·ªôt phi·∫øu s·ª≠a ch·ªØa v·ªõi nhi·ªÅu m·ª•c, ho·∫∑c m·ªôt quy tr√¨nh l√†m vi·ªác v·ªõi c√°c b∆∞·ªõc ph·ª• thu·ªôc), vi·ªác s·ª≠ d·ª•ng `Drawer` c√≥ th·ªÉ kh√¥ng ƒë·ªß kh√¥ng gian v√† g√¢y r·ªëi. Trong nh·ªØng tr∆∞·ªùng h·ª£p n√†y, ch√∫ng ta s·∫Ω s·ª≠ d·ª•ng m·ªôt trang chuy√™n d·ª•ng cho c√°c h√†nh ƒë·ªông "Th√™m m·ªõi" v√† "Ch·ªânh s·ª≠a".

### Nguy√™n t·∫Øc Thi·∫øt k·∫ø

*   **T·∫≠p trung:** Trang ch·ªâ d√†nh ri√™ng cho m·ªôt t√°c v·ª• duy nh·∫•t (th√™m ho·∫∑c s·ª≠a).
*   **ƒêi·ªÅu h∆∞·ªõng R√µ r√†ng:** Ng∆∞·ªùi d√πng ph·∫£i lu√¥n bi·∫øt c√°ch quay l·∫°i, h·ªßy b·ªè, ho·∫∑c l∆∞u l·∫°i ti·∫øn tr√¨nh c·ªßa m√¨nh.
*   **Nh·∫•t qu√°n:** C·∫•u tr√∫c c·ªßa c√°c trang n√†y ph·∫£i nh·∫•t qu√°n tr√™n to√†n b·ªô ·ª©ng d·ª•ng.

### C·∫•u tr√∫c Trang

```tsx
<>
  <PageHeader title="[Th√™m/S·ª≠a ƒê·ªëi t∆∞·ª£ng]" backHref="/[list-page-url]" />
  <div className="flex flex-1 flex-col">
    <div className="@container/main flex flex-1 flex-col gap-2">
      <div className="flex flex-col gap-4 py-4 md:gap-6 md:py-6">
        <MyComplexForm />
      </div>
    </div>
  </div>
  <PageFooter>
    <Button variant="outline" onClick={() => router.back()}>
      H·ªßy b·ªè
    </Button>
    <Button type="submit" form="my-complex-form-id">
      L∆∞u thay ƒë·ªïi
    </Button>
  </PageFooter>
</>
```

### C√°c th√†nh ph·∫ßn ch√≠nh

1.  **`PageHeader` v·ªõi N√∫t Quay l·∫°i:**
    *   **B·∫Øt bu·ªôc:** M·ªçi trang th√™m/s·ª≠a hay trang con chuy√™n d·ª•ng PH·∫¢I s·ª≠ d·ª•ng `PageHeader` v·ªõi prop `backHref`.
    *   Prop `backHref` s·∫Ω nh·∫≠n m·ªôt ƒë∆∞·ªùng d·∫´n (URL string) ƒë·∫øn trang danh s√°ch tr∆∞·ªõc ƒë√≥.
    *   Khi `backHref` ƒë∆∞·ª£c cung c·∫•p, component s·∫Ω t·ª± ƒë·ªông hi·ªÉn th·ªã m·ªôt n√∫t "Quay l·∫°i" (bi·ªÉu t∆∞·ª£ng m≈©i t√™n) ngay b√™n tr√°i c·ªßa ti√™u ƒë·ªÅ trang.
    *   **H√†nh vi:** Nh·∫•p v√†o n√∫t n√†y s·∫Ω ƒëi·ªÅu h∆∞·ªõng ng∆∞·ªùi d√πng v·ªÅ l·∫°i `backHref`.
    *   **L·ª£i √≠ch:** Cung c·∫•p m·ªôt l·ªëi tho√°t r√µ r√†ng, nh·∫•t qu√°n, gi√∫p ng∆∞·ªùi d√πng kh√¥ng b·ªã "l·∫°c" sau khi ho√†n th√†nh ho·∫∑c h·ªßy b·ªè m·ªôt t√°c v·ª•.
    *   **V√≠ d·ª•:**
        ```tsx
        // Trang t·∫°o phi·∫øu d·ªãch v·ª• m·ªõi
        <PageHeader 
          title="T·∫°o Phi·∫øu D·ªãch V·ª• M·ªõi" 
          backHref="/operations/service-requests" 
        />
        ```
    *   Ti√™u ƒë·ªÅ ph·∫£i r√µ r√†ng, v√≠ d·ª•: "T·∫°o Phi·∫øu s·ª≠a ch·ªØa M·ªõi" ho·∫∑c "Ch·ªânh s·ª≠a S·∫£n ph·∫©m".

2.  **Form ch√≠nh:**
    *   L√† th√†nh ph·∫ßn ch√≠nh c·ªßa trang.
    *   N√™n ƒë∆∞·ª£c chia th√†nh c√°c `Card` ho·∫∑c `section` h·ª£p l√Ω n·∫øu c√≥ nhi·ªÅu nh√≥m th√¥ng tin.

3.  **`PageFooter` v·ªõi c√°c N√∫t H√†nh ƒë·ªông:**
    *   M·ªôt thanh footer `sticky` ·ªü cu·ªëi trang ƒë·ªÉ c√°c n√∫t h√†nh ƒë·ªông lu√¥n hi·ªÉn th·ªã.
    *   **N√∫t "H·ªßy b·ªè" (Cancel):**
        *   Lu√¥n s·ª≠ d·ª•ng `variant="outline"`.
        *   H√†nh ƒë·ªông: Quay l·∫°i trang tr∆∞·ªõc (`router.back()`).
        *   N√™n c√≥ m·ªôt h·ªôp tho·∫°i x√°c nh·∫≠n n·∫øu c√≥ c√°c thay ƒë·ªïi ch∆∞a ƒë∆∞·ª£c l∆∞u.
    *   **N√∫t "L∆∞u" (Save/Submit):**
        *   L√† n√∫t h√†nh ƒë·ªông ch√≠nh.
        *   H√†nh ƒë·ªông: G·ª≠i bi·ªÉu m·∫´u. Sau khi th√†nh c√¥ng, chuy·ªÉn h∆∞·ªõng ng∆∞·ªùi d√πng v·ªÅ trang danh s√°ch ho·∫∑c trang chi ti·∫øt c·ªßa m·ª•c v·ª´a ƒë∆∞·ª£c t·∫°o/ch·ªânh s·ª≠a.

---

## 8. Thanh ƒêi·ªÅu h∆∞·ªõng (Sidebar)

Thanh ƒëi·ªÅu h∆∞·ªõng b√™n (sidebar) l√† th√†nh ph·∫ßn ƒëi·ªÅu h∆∞·ªõng ch√≠nh c·ªßa ·ª©ng d·ª•ng. C·∫•u tr√∫c v√† n·ªôi dung c·ªßa n√≥ ƒë∆∞·ª£c qu·∫£n l√Ω m·ªôt c√°ch t·∫≠p trung v√† d·ª±a tr√™n d·ªØ li·ªáu.

### C·∫•u tr√∫c v√† Nguy√™n t·∫Øc Ho·∫°t ƒë·ªông

Sidebar ƒë∆∞·ª£c x√¢y d·ª±ng b·∫±ng c√°ch s·ª≠ d·ª•ng component `AppSidebar` (`src/components/app-sidebar.tsx`), v√† to√†n b·ªô c·∫•u tr√∫c ƒëi·ªÅu h∆∞·ªõng ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a trong m·ªôt ƒë·ªëi t∆∞·ª£ng JavaScript c√≥ t√™n l√† `baseData` b√™n trong file n√†y.

*   **Data-Driven:** ƒê·ªÉ th√™m, x√≥a, ho·∫∑c s·∫Øp x·∫øp l·∫°i c√°c m·ª•c trong sidebar, b·∫°n ch·ªâ c·∫ßn ch·ªânh s·ª≠a ƒë·ªëi t∆∞·ª£ng `baseData`.
*   **Ph√¢n quy·ªÅn theo Vai tr√≤:** M·ªói m·ª•c trong `baseData` c√≥ m·ªôt thu·ªôc t√≠nh `allowedRoles` ƒë·ªÉ ki·ªÉm so√°t vai tr√≤ n√†o c√≥ th·ªÉ th·∫•y m·ª•c ƒë√≥. Logic l·ªçc ƒë∆∞·ª£c x·ª≠ l√Ω b·ªüi h√†m `getFilteredData`.
*   **Component T√°i s·ª≠ d·ª•ng:** C√°c nh√≥m ƒëi·ªÅu h∆∞·ªõng ƒë∆∞·ª£c hi·ªÉn th·ªã b·∫±ng c√°c component `NavSection` (cho c√°c danh s√°ch ƒë∆°n gi·∫£n) v√† `NavWorkflows` (cho c√°c m·ª•c c√≥ th·ªÉ thu g·ªçn).

### C√°ch c·∫≠p nh·∫≠t Sidebar

ƒê·ªÉ c·∫≠p nh·∫≠t sidebar, h√£y m·ªü file `src/components/app-sidebar.tsx` v√† s·ª≠a ƒë·ªïi ƒë·ªëi t∆∞·ª£ng `baseData`.

**V√≠ d·ª• v·ªÅ c·∫•u tr√∫c `baseData`:**

```javascript
const baseData = {
  // Nh√≥m T·ªïng quan
  overview: [
    {
      title: "Dashboard",
      url: "/dashboard",
      icon: IconDashboard,
      allowedRoles: ["admin", "manager"],
    },
    // ... c√°c m·ª•c kh√°c
  ],
  // Nh√≥m V·∫≠n h√†nh
  operations: [
    {
      title: "Phi·∫øu d·ªãch v·ª•",
      url: "/operations/tickets",
      icon: IconClipboardList,
      allowedRoles: ["admin", "manager", "technician", "reception"],
    },
    // ... c√°c m·ª•c kh√°c
  ],
  // ... c√°c nh√≥m kh√°c
};
```

**ƒê·ªÉ th√™m m·ªôt m·ª•c m·ªõi:**

1.  X√°c ƒë·ªãnh nh√≥m b·∫°n mu·ªën th√™m m·ª•c v√†o (v√≠ d·ª•: `operations`).
2.  Th√™m m·ªôt object m·ªõi v√†o m·∫£ng c·ªßa nh√≥m ƒë√≥ v·ªõi c√°c thu·ªôc t√≠nh: `title`, `url`, `icon`, v√† `allowedRoles`.

**ƒê·ªÉ thay ƒë·ªïi th·ª© t·ª±:**

*   Ch·ªâ c·∫ßn thay ƒë·ªïi th·ª© t·ª± c·ªßa c√°c object trong c√°c m·∫£ng c·ªßa `baseData`.

### Giao di·ªán v√† Style

*   **M√†u s·∫Øc v√† K√≠ch th∆∞·ªõc:** C√°c quy chu·∫©n v·ªÅ m√†u s·∫Øc, k√≠ch th∆∞·ªõc, v√† kho·∫£ng c√°ch v·∫´n tu√¢n theo c√°c bi·∫øn CSS ƒë∆∞·ª£c ƒë·ªãnh nghƒ©a trong `src/app/globals.css` nh∆∞ ƒë√£ m√¥ t·∫£ trong c√°c ph·∫ßn tr∆∞·ªõc.
### H√†nh vi ƒê√°p ·ª©ng (Responsive)

*   **Desktop (`md` tr·ªü l√™n):** Sidebar ƒë∆∞·ª£c c·ªë ƒë·ªãnh ·ªü b√™n tr√°i v√† lu√¥n hi·ªÉn th·ªã. N√≥ c√≥ th·ªÉ ƒë∆∞·ª£c thu g·ªçn l·∫°i ƒë·ªÉ ch·ªâ hi·ªÉn th·ªã c√°c icon.
*   **Mobile (d∆∞·ªõi `md`):
    *   Sidebar ƒë∆∞·ª£c ·∫©n theo m·∫∑c ƒë·ªãnh ƒë·ªÉ ti·∫øt ki·ªám kh√¥ng gian.
    *   N√≥ ƒë∆∞·ª£c tri·ªÉn khai b·∫±ng component `Sheet`, xu·∫•t hi·ªán d∆∞·ªõi d·∫°ng m·ªôt l·ªõp ph·ªß (overlay) tr∆∞·ª£t v√†o t·ª´ **b√™n tr√°i** m√†n h√¨nh khi ng∆∞·ªùi d√πng nh·∫•p v√†o bi·ªÉu t∆∞·ª£ng menu (hamburger icon).
    *   Khi m·ªü, m·ªôt l·ªõp n·ªÅn m·ªù s·∫Ω che ƒëi n·ªôi dung ch√≠nh.
    *   Ng∆∞·ªùi d√πng c√≥ th·ªÉ ƒë√≥ng sidebar b·∫±ng c√°ch nh·∫•p v√†o l·ªõp n·ªÅn m·ªù, vu·ªët sidebar v·ªÅ l·∫°i b√™n tr√°i, ho·∫∑c nh·∫•p v√†o n√∫t ƒë√≥ng (n·∫øu c√≥).

---

## 9. Quy chu·∫©n Giao di·ªán cho Automation Test (Automation-Friendly UI Patterns)

ƒê·ªÉ ƒë·∫£m b·∫£o c√°c b√†i test t·ª± ƒë·ªông (v√≠ d·ª•: Playwright) ho·∫°t ƒë·ªông ·ªïn ƒë·ªãnh v√† ƒë√°ng tin c·∫≠y, c√°c component giao di·ªán c·∫ßn ƒë∆∞·ª£c code theo c√°c quy chu·∫©n sau.

### 9.1. Chi·∫øn l∆∞·ª£c S·ª≠ d·ª•ng Thu·ªôc t√≠nh cho Test

ƒê·ªÉ ch·ªçn c√°c ph·∫ßn t·ª≠ m·ªôt c√°ch nh·∫•t qu√°n trong c√°c b√†i test, h√£y ∆∞u ti√™n s·ª≠ d·ª•ng c√°c thu·ªôc t√≠nh sau:

1.  **`aria-label`:**
    *   **C√¥ng d·ª•ng:** Cung c·∫•p m·ªôt nh√£n c√≥ th·ªÉ truy c·∫≠p cho c√°c ph·∫ßn t·ª≠ kh√¥ng c√≥ text hi·ªÉn th·ªã (v√≠ d·ª•: n√∫t ch·ªâ c√≥ icon).
    *   **L·ª£i √≠ch:** C·∫£i thi·ªán kh·∫£ nƒÉng truy c·∫≠p v√† t·∫°o ra m·ªôt selector ng·ªØ nghƒ©a cho test.
    *   **V√≠ d·ª•:**
        ```tsx
        <Button aria-label="Ch·ªânh s·ª≠a s·∫£n ph·∫©m">
          <IconEdit />
        </Button>
        ```
    *   **S·ª≠ d·ª•ng trong Test:** `page.getByRole('button', { name: 'Ch·ªânh s·ª≠a s·∫£n ph·∫©m' })`

2.  **`data-testid`:**
    *   **C√¥ng d·ª•ng:** Cung c·∫•p m·ªôt ƒë·ªãnh danh ·ªïn ƒë·ªãnh, duy nh·∫•t cho c√°c ph·∫ßn t·ª≠ kh√¥ng c√≥ vai tr√≤ ho·∫∑c nh√£n r√µ r√†ng.
    *   **Khi n√†o d√πng:** D√πng cho c√°c container, dialog, ho·∫∑c c√°c ph·∫ßn t·ª≠ c·ª• th·ªÉ c·∫ßn ƒë∆∞·ª£c nh·∫Øm ƒë·∫øn tr·ª±c ti·∫øp.
    *   **V√≠ d·ª•:**
        ```tsx
        <DialogContent data-testid="edit-product-dialog">
        <TableRow data-testid={`product-row-${product.id}`}>
        ```
    *   **S·ª≠ d·ª•ng trong Test:** `page.getByTestId('edit-product-dialog')`

3.  **`data-role`:**
    *   **C√¥ng d·ª•ng:** Ch·ªçn c√°c m·ª•c trong m·ªôt danh s√°ch m√† kh√¥ng ph·ª• thu·ªôc v√†o ng√¥n ng·ªØ hi·ªÉn th·ªã.
    *   **L·ª£i √≠ch:** Gi√∫p test ch·∫°y ·ªïn ƒë·ªãnh tr√™n nhi·ªÅu ng√¥n ng·ªØ.
    *   **V√≠ d·ª•:**
        ```tsx
        <DropdownMenuItem data-role="reception">
          L·ªÖ t√¢n
        </DropdownMenuItem>
        ```
    *   **S·ª≠ d·ª•ng trong Test:** `page.locator('[role="menuitem"][data-role="reception"]')`

### 9.2. Quy t·∫Øc L·ªìng Component (Component Nesting)

**V·∫•n ƒë·ªÅ:** C√°c component t∆∞∆°ng t√°c l·ªìng nhau kh√¥ng ƒë√∫ng c√°ch c√≥ th·ªÉ khi·∫øn test t·ª± ƒë·ªông th·∫•t b·∫°i, m·∫∑c d√π ch√∫ng ho·∫°t ƒë·ªông b√¨nh th∆∞·ªùng khi ki·ªÉm tra th·ªß c√¥ng.

**Quy t·∫Øc B·∫ÆT BU·ªòC:** Khi l·ªìng `Tooltip` v√† `DropdownMenuTrigger`, **`DropdownMenuTrigger` ph·∫£i n·∫±m b√™n trong `TooltipTrigger`**.

*   **‚ùå SAI:**
    ```tsx
    <DropdownMenuTrigger>
      <Tooltip>
        <TooltipTrigger>
          <Button />
        </TooltipTrigger>
      </Tooltip>
    </DropdownMenuTrigger>
    ```
*   **‚úÖ ƒê√öNG:**
    ```tsx
    <Tooltip>
      <TooltipTrigger asChild>
        <DropdownMenuTrigger asChild>
          <Button />
        </DropdownMenuTrigger>
      </TooltipTrigger>
    </Tooltip>
    ```

### 9.3. C√°c Th·ª±c h√†nh T·ªët nh·∫•t cho Test

*   **Dropdown Menus:**
    *   Lu√¥n ch·ªù cho menu m·ªü ra tr∆∞·ªõc khi t∆∞∆°ng t√°c: `await expect(page.locator('[role="menu"]')).toBeVisible();`
    *   S·ª≠ d·ª•ng selector c√≥ ph·∫°m vi r√µ r√†ng ƒë·ªÉ ch·ªçn c√°c m·ª•c, v√≠ d·ª•: `page.locator('[role="menuitem"][data-role="reception"]')`.
*   **Pagination:**
    *   ƒê·ªÉ x·ª≠ l√Ω ph√¢n trang, h√£y lu√¥n **s·ª≠ d·ª•ng ch·ª©c nƒÉng t√¨m ki·∫øm** ƒë·ªÉ l·ªçc ra h√†ng (row) b·∫°n c·∫ßn tr∆∞·ªõc khi t∆∞∆°ng t√°c v·ªõi n√≥. ƒêi·ªÅu n√†y ƒë·∫£m b·∫£o h√†ng ƒë√≥ s·∫Ω hi·ªÉn th·ªã tr√™n trang hi·ªán t·∫°i.
*   **Ch·ªçn N√∫t (Button Selection):**
    *   **Tr√°nh** ch·ªçn n√∫t d·ª±a tr√™n th·ª© t·ª± (`.nth(0)`) ho·∫∑c c√°c selector kh√¥ng ·ªïn ƒë·ªãnh.
    *   **N√™n** s·ª≠ d·ª•ng c√°c selector ng·ªØ nghƒ©a nh∆∞ `getByRole` (v·ªõi `aria-label`) ho·∫∑c `getByTestId`.

**T√†i li·ªáu n√†y l√† ngu·ªìn tham kh·∫£o ch√≠nh cho vi·ªác ph√°t tri·ªÉn giao di·ªán. Vui l√≤ng tu√¢n th·ªß nghi√™m ng·∫∑t.**

---

## 10. Change Log

**Version 1.2 (2025-10-27):**
- ‚úÖ **Th√™m Section 2.6:** Shared Components & Code Reusability
  - Nguy√™n t·∫Øc DRY (Don't Repeat Yourself)
  - **TablePagination Component** - √Åp d·ª•ng cho 8 tables, gi·∫£m ~600 lines code
  - **FormDrawer Component** - √Åp d·ª•ng cho 4+ forms, gi·∫£m ~150-200 lines/form
  - Impact & Benefits analysis
  - Best practices cho component creation v√† refactoring
- üîÑ **C·∫≠p nh·∫≠t Section 4 (Tables):** Pagination ph·∫£i d√πng TablePagination component
- üîÑ **C·∫≠p nh·∫≠t Section 6 (Drawers):** Forms ph·∫£i d√πng FormDrawer component
- üì¶ Bundle size optimization: Average 5-15 kB per route
- ‚ö° Faster development v·ªõi shared components
- üéØ Consistency improvements across all tables v√† forms

**Version 1.1 (2025-10-27):**
- ‚úÖ **Th√™m Section 2.5:** H·ªá Th·ªëng M√†u S·∫Øc & Badges (Color System & Badge Usage)
  - Category Badge Pattern v·ªõi 7 m√†u chu·∫©n
  - Status Badge Pattern v·ªõi gradients
  - Boolean Badge Pattern v·ªõi icons
  - Metric Badge Pattern v·ªõi color-coded thresholds
  - Icon Integration Pattern
  - Best practices v√† DO/DON'T guidelines
  - Reference implementation: `/src/components/tables/task-types-table.tsx`
- üé® Thi·∫øt l·∫≠p ti√™u chu·∫©n m√†u s·∫Øc nh·∫•t qu√°n cho to√†n b·ªô ·ª©ng d·ª•ng
- üåô T·∫•t c·∫£ patterns ƒë·ªÅu c√≥ dark mode support

**Version 1.0 (2025-10-26):**
- Phi√™n b·∫£n ban ƒë·∫ßu v·ªõi c√°c sections:
  - Page Structure
  - Style, Spacing v√† Padding
  - Tabs System
  - Tables
  - Cards
  - Drawers
  - Dedicated Add/Edit Pages
  - Sidebar
  - Automation-Friendly UI Patterns